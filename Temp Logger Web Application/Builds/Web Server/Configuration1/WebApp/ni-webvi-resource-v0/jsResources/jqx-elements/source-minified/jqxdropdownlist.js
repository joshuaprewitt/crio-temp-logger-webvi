"use strict";JQX("jqx-drop-down-list",function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"template",value:function(){return'<div id="container">\n                    <div id="buttonsContainer" class = "jqx-unselectable">\n                        <span id="actionButton" class="jqx-action-button ">[[placeholder]]</span>\n                        <span id="dropDownButton" class="jqx-drop-down-button">&#xe804</span>\n                    </div>\n                    <jqx-list-box id="listBox" class ="jqx-popup jqx-visibility-hidden"\n                            data-source="[[dataSource]]"\n                            disabled="[[disabled]]"\n                            display-loading-indicator="[[displayLoadingIndicator]]"\n                            display-member="[[displayMember]]"\n                            filterable="[[filterable]]"\n                            filter-mode="[[filterMode]]"\n                            filter-input-placeholder="[[filterInputPlaceholder]]"\n                            grouped="[[grouped]]"\n                            group-member="[[groupMember]]"\n                            item-height="[[itemHeight]]"\n                            item-template="[[itemTemplate]]"\n                            incremental-search-delay="[[incrementalSearchDelay]]"\n                            incremental-search-mode="[[incrementalSearchMode]]"\n                            loading-indicator-placeholder="[[loadingIndicatorPlaceholder]]"\n                            loading-indicator-position="[[loadingIndicatorPosition]]"\n                            placeholder="[[dropDownPlaceholder]]"\n                            readonly="[[readonly]]"\n                            selected-indexes="{{selectedIndexes}}"\n                            selection-mode="[[selectionMode]]"\n                            selected-values="{{selectedValues}}"\n                            sorted="[[sorted]]"\n                            value-member="[[valueMember]]"\n                            virtualized="[[virtualized]]">\n                        <content></content>\n                    </jqx-list-box>\n                </div>'}},{key:"propertyChangedHandler",value:function(e,o,n){babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"propertyChangedHandler",this).call(this,e,o,n);var i=this;switch(e){case"disabled":i.setFocusable(void 0===i._focusable||i._focusable),i.close();break;case"readonly":i.close();break;case"dataSource":case"displayMember":i.$.actionButton.innerHTML=i.placeholder;break;case"dropDownOpenMode":i.setFocusable(void 0===i._focusable||i._focusable),i.$listBox.addClass("jqx-visibility-hidden"),i.$.dropDownButton.removeAttribute("selected"),i.$.buttonsContainer.removeAttribute("selected");break;case"dropDownHeight":case"dropDownWidth":i._setDropDownSize("dropDownWidth"===e?"width":"height",n);break;case"dropDownVerticalPosition":i._setDropDownVerticalPosition(n);break;case"selectedValues":case"selectedIndexes":0===n.length&&(i.$.actionButton.innerHTML=i.placeholder);break;case"selectionDisplayMode":i._applySelection(n)}}},{key:"appendChild",value:function(e){var t=this;if(!t.isCompleted){var o=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.appendChild.apply(t,o.concat(Array.prototype.slice.call(arguments)))}if(!e)return void t.error(t.localize("invalidNode",{elementType:t.nodeName.toLowerCase(),method:"appendChild",node:"node"}));t.$.listBox.appendChild(e)}},{key:"clearItems",value:function(){var e=this;e.$.listBox.clearItems(),e.$.actionButton.innerHTML=e.placeholder}},{key:"clearSelection",value:function(){var e=this;e.$.listBox.clearSelection(),e.$.actionButton.innerHTML=e.placeholder}},{key:"close",value:function(){var e=this;if(!e.$listBox.hasClass("jqx-visibility-hidden")){e.$.fireEvent("closing").defaultPrevented||(e.$listBox.addClass("jqx-visibility-hidden"),e.$.fireEvent("close"),"bottom"===e.dropDownVerticalPosition?e.$.dropDownButton.innerHTML="&#xe804":"top"===e.dropDownVerticalPosition&&(e.$.dropDownButton.innerHTML="&#xe801"),e.$.dropDownButton.removeAttribute("selected"),e.$.buttonsContainer.removeAttribute("selected"))}}},{key:"cloneNode",value:function(){var e=this,t=HTMLElement.prototype.cloneNode.apply(e,Array.prototype.slice.call(arguments,0,1));return t.dataSource=e.dataSource,t}},{key:"ensureVisible",value:function(e){this.$.listBox.ensureVisible(e)}},{key:"_focus",value:function(e){this.$.listBox._focus(e)}},{key:"getItem",value:function(e){return this.$.listBox.getItem(e)}},{key:"insert",value:function(e,t){var o=this;o.$.listBox.insert(e,t),o._applySelection(o.selectionDisplayMode)}},{key:"insertBefore",value:function(e,t){var o=this;if(!o.isCompleted){var n=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.insertBefore.apply(o,n.concat(Array.prototype.slice.call(arguments)))}if(!e||!t)return void o.error(o.localize("invalidNode",{elementType:o.nodeName.toLowerCase(),method:"insertBefore",node:"newNode/referenceNode"}));o.$.listBox.insertBefore(e,t)}},{key:"open",value:function(){var e=this;if(e.$listBox.hasClass("jqx-visibility-hidden")){e.$.fireEvent("opening").defaultPrevented||(e.$listBox.removeClass("jqx-visibility-hidden"),e.$.fireEvent("open"),"bottom"===e.dropDownVerticalPosition?e.$.dropDownButton.innerHTML="&#xe801":"top"===e.dropDownVerticalPosition&&(e.$.dropDownButton.innerHTML="&#xe804"),"dropDownButton"===e.dropDownOpenMode?(e.$.buttonsContainer.removeAttribute("selected"),e.$.dropDownButton.setAttribute("selected","")):(e.$.dropDownButton.removeAttribute("selected"),e.$.buttonsContainer.setAttribute("selected","")),e._keyPressed||"JQX-DROP-DOWN-LIST"!==e.nodeName||e.$.listBox.focus())}}},{key:"ready",value:function(){babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"ready",this).call(this),this._createElement()}},{key:"remove",value:function(e){var t=this;t.$.listBox.remove(e),t._applySelection(t.selectionDisplayMode)}},{key:"removeChild",value:function(e){var t=this;if(!t.isCompleted){var o=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.insertBefore.apply(t,o.concat(Array.prototype.slice.call(arguments)))}if(!(e&&e instanceof JQX.ListItem))return void t.error(t.localize("invalidNode",{elementType:t.nodeName.toLowerCase(),method:"removeChild",node:"node"}));t.$.listBox.removeChild(e)}},{key:"select",value:function(e){this.$.listBox.select(e)}},{key:"setFocusable",value:function(e){var t=this;if(t._focusable=e,t.disabled||!t._focusable)return t.removeAttribute("tabindex"),t.$.actionButton.removeAttribute("tabindex"),void t.$.dropDownButton.removeAttribute("tabindex");var o=t.tabIndex>0?t.tabIndex:0;"dropDownButton"===t.dropDownOpenMode?(t.removeAttribute("tabindex"),t.$.actionButton.setAttribute("tabindex",o),t.$.dropDownButton.setAttribute("tabindex",o)):(t.$.actionButton.removeAttribute("tabindex"),t.$.dropDownButton.removeAttribute("tabindex"),t.tabIndex=o)}},{key:"unselect",value:function(e){this.$.listBox.unselect(e)}},{key:"update",value:function(e,t){var o=this;o.$.listBox.update(e,t),o._applySelection(o.selectionDisplayMode)}},{key:"_applySelection",value:function(e){var t=this;if("placeholder"===e||0===t.selectedIndexes.length)return void(t.$.actionButton.innerHTML=t.placeholder);if(t.$.listBox._items&&0!==t.$.listBox._items.length){if("default"===e)return void(t.$.actionButton.innerHTML=t.selectedIndexes.map(function(e){return t.$.listBox._items[e].label}).toString());var o=document,n=o.createDocumentFragment(),i=void 0;t.selectedIndexes.map(function(e){i=o.createElement("span"),i.innerHTML="<span class='jqx-drop-down-list-selection-label'>"+t.$.listBox._items[e].label+"</span><span class='jqx-drop-down-list-unselect-button'>&#10006</span>",n.appendChild(i)}),t.$.actionButton.innerHTML="",t.$.actionButton.appendChild(n)}}},{key:"_buttonsDownHandler",value:function(e){var t=this;t.disabled||(t._preventsSelectStart=!0,"dropDownButton"===t.dropDownOpenMode&&e.target===t.$.actionButton&&t.$actionButton.addClass("active"))}},{key:"_buttonsMouseEventsHandler",value:function(e){this.disabled||("mouseenter"===e.type?e.target.$.addClass("hovered"):e.target.$.removeClass("hovered"))}},{key:"_createElement",value:function(){var e=this;JQX.ListBox||e.error(e.localize("missingReference",{elementType:e.nodeName.toLowerCase(),files:"jqxlistbox.js"})),e._setDropDownSize("width",e.dropDownWidth),e._setDropDownSize("height",e.dropDownHeight),e._setDropDownVerticalPosition(e.dropDownVerticalPosition),e._applySelection(e.selectionDisplayMode),e.setFocusable(!0)}},{key:"_documentDownHandler",value:function(e){var t=this;t.disabled||t.readonly||(t._isListBoxThumbDragged=!(e.target===document||!e.target.classList.contains("jqx-thumb")||e.target.ownerElement.ownerElement!==t.$.listBox))}},{key:"_documentUpHandler",value:function(e){var t=this;if(t.$actionButton.removeClass("active"),!(t.disabled||t._isListBoxThumbDragged||t.readonly)){var o=e.originalEvent.target;if(t._preventsSelectStart=!1,o===t.$.actionButton||o===t.$.dropDownButton)return"dropDownButton"===t.dropDownOpenMode&&o===t.$.actionButton?void t.close():void(t.$listBox.hasClass("jqx-visibility-hidden")&&"none"!==t.dropDownOpenMode?t.open():t.close());if(o.classList.contains("jqx-drop-down-list-selection-label")&&o.parentElement.parentElement===t.$.actionButton){"none"!==t.dropDownOpenMode&&t.open();var n=t.$.listBox._items.filter(function(e){return e.label.toString()===o.textContent})[0];return t.$.listBox.focus(),t.$.listBox._scrollView.scrollTop=n.offsetTop,void t._focus(n)}if(o.classList.contains("jqx-drop-down-list-unselect-button")&&o.parentElement.parentElement===t.$.actionButton)return void t.unselect(t.$.listBox._items.filter(function(e){return e.label.toString()===o.previousElementSibling.textContent})[0]);for(;o;){if(o instanceof JQX.ListItem&&o.ownerListBox===t.$.listBox){o="item";break}if(o===t.$.listBox){o="listBox";break}o=o.parentElement}return"listBox"!==o&&"item"!==o||"item"===o&&"checkBox"!==t.selectionMode&&"default"!==t.selectionMode&&t.selectionMode.indexOf("Many")<0?void t.close():void 0}}},{key:"_keyDownHandler",value:function(e){var t=this;if(e.target!==t.$.listBox.$.filterInput)switch(e.key){case"Enter":case" ":e.target===t?t.$buttonsContainer.addClass("active"):e.target.$.addClass("active"),e.target!==t.$.actionButton&&(t._keyPressed=!0,t.$listBox.hasClass("jqx-visibility-hidden")&&!t.readonly&&"none"!==t.dropDownOpenMode?t.open():t.close());break;case"ArrowUp":case"ArrowDown":if(t.readonly)return;if(e.altKey)return t._keyPressed=!1,void(t.$listBox.hasClass("jqx-visibility-hidden")?t.open():t.close());t.$.listBox._handleKeyStrokes(e.key);break;case"Escape":t.close()}}},{key:"_keyUpHandler",value:function(e){var t=this;if(e.target!==t.$.listBox.$.filterInput&&("Enter"===e.key||" "===e.key)){switch(e.target){case t:t.$buttonsContainer.removeClass("active");break;default:e.target.$.removeClass("active")}t.$listBox.hasClass("jqx-visibility-hidden")||(t._keyPressed=!1,t.$.listBox.focus())}}},{key:"_listBoxChangeHandler",value:function(e){this._applySelection(this.selectionDisplayMode,e.detail)}},{key:"_listBoxKeyDownHandler",value:function(e){var t=this;if("Enter"===e.key&&(t.close(),"dropDownButton"===t.dropDownOpenMode?t.$.dropDownButton.focus():t.focus()),"Escape"===e.key)return void t.close()}},{key:"_mouseEnterHandler",value:function(){var e=this;e.$.addClass("hovered"),"JQX-DROP-DOWN-LIST"!==e.tagName||"auto"!==e.dropDownOpenMode||e.disabled||e.readonly||e.open()}},{key:"_mouseLeaveHandler",value:function(){var e=this;e.$.removeClass("hovered"),"auto"!==e.dropDownOpenMode||e.disabled||e.readonly||e.close()}},{key:"_selectStartHandler",value:function(e){this._preventsSelectStart&&e.preventDefault()}},{key:"_setDropDownSize",value:function(e,t){var o=this;if("auto"===t)return void(o.$.listBox.style[e]="");t=parseFloat(t),o.$.listBox.style[e]=isNaN(t)?"":Math.max(0,t)+"px"}},{key:"_setDropDownVerticalPosition",value:function(e){var t=this;if("top"===e)return t.$.dropDownButton.innerHTML="&#xe801",void(t.$.listBox.style.top="-"+(parseFloat(t.dropDownHeight)-1)+"px");t.$.listBox.style.top="",t.$.dropDownButton.innerHTML="bottom"===e?"&#xe804":"&#xe806"}},{key:"items",get:function(){if(this.$)return this.$.listBox.items}}],[{key:"properties",get:function(){return{dataSource:{value:null,type:"object",reflectToAttribute:!1},displayLoadingIndicator:{value:!1,type:"boolean"},displayMember:{value:"",type:"string"},dropDownOpenMode:{allowedValues:["none","default","dropDownButton","auto"],value:"default",type:"string"},dropDownHeight:{value:"200",type:"string"},dropDownPlaceholder:{value:"No Items",type:"string"},dropDownVerticalPosition:{allowedValues:["top","bottom","overlay"],value:"bottom",type:"string"},dropDownWidth:{value:"auto",type:"string"},filterable:{value:!1,type:"boolean"},filterInputPlaceholder:{value:"",type:"string"},filterMode:{value:"startsWithIgnoreCase",allowedValues:["none","contains","containsIgnoreCase","equals","equalsIgnoreCase","startsWith","startsWithIgnoreCase","endsWith","endsWithIgnoreCase"],type:"string"},grouped:{value:!1,type:"boolean"},groupMember:{value:"",type:"string"},incrementalSearchDelay:{value:700,type:"number?"},incrementalSearchMode:{value:"startsWithIgnoreCase",allowedValues:["none","contains","containsIgnoreCase","equals","equalsIgnoreCase","startsWith","startsWithIgnoreCase","endsWith","endsWithIgnoreCase"],type:"string"},itemTemplate:{value:null,type:"string?"},itemHeight:{value:null,type:"number?"},loadingIndicatorPlaceholder:{value:"Loading...",type:"string"},loadingIndicatorPosition:{value:"center",allowedValues:["bottom","center","top"],type:"string"},messages:{extend:!0,value:{en:{missingReference:"{{elementType}}: Missing reference to {{files}}.",invalidNode:'{{elementType}}: Invalid parameter "{{node}}" when calling {{method}}.'}},type:"object"},placeholder:{value:"Please Select:",type:"string"},readonly:{value:!1,type:"boolean"},selectionDisplayMode:{value:"default",allowedValues:["default","placeholder","advanced"],type:"string"},selectionMode:{value:"one",allowedValues:["none","default","zeroOrMany","oneOrMany","zeroOrOne","one","checkBox","radioButton"],type:"string"},selectedIndexes:{value:[],type:"array"},selectedValues:{value:[],type:"array"},sorted:{value:!1,type:"boolean"},valueMember:{value:"",type:"string"},virtualized:{value:!1,type:"boolean"}}}},{key:"listeners",get:function(){return{"actionButton.down":"_buttonsDownHandler","actionButton.mouseenter":"_buttonsMouseEventsHandler","actionButton.mouseleave":"_buttonsMouseEventsHandler","document.selectstart":"_selectStartHandler","document.down":"_documentDownHandler","document.up":"_documentUpHandler","dropDownButton.down":"_buttonsDownHandler","dropDownButton.mouseenter":"_buttonsMouseEventsHandler","dropDownButton.mouseleave":"_buttonsMouseEventsHandler",keydown:"_keyDownHandler",keyup:"_keyUpHandler","listBox.change":"_listBoxChangeHandler","listBox.keydown":"_listBoxKeyDownHandler",mouseenter:"_mouseEnterHandler",mouseleave:"_mouseLeaveHandler"}}}]),t}(JQX.ContentElement));
//# sourceMappingURL=jqxdropdownlist.js.map
