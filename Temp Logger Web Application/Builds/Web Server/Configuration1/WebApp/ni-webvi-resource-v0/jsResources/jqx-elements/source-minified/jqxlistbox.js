"use strict"; JQX("jqx-list-item", function (e) { function t() { return babelHelpers.classCallCheck(this, t), babelHelpers.possibleConstructorReturn(this, (t.__proto__ || Object.getPrototypeOf(t)).apply(this, arguments)) } return babelHelpers.inherits(t, e), babelHelpers.createClass(t, [{ key: "template", value: function () { return "<div id=\"container\">\n                   <span id='itemInput' class ='jqx-input jqx-hidden'></span>\n                   <div id=\"itemContainer\" inner-h-t-m-l='[[innerHTML]]' class =\"jqx-list-item-container\"><content></content></div>\n               </div>" } }, { key: "appendChild", value: function (e) { var t = this; if (!t.isCompleted) { var i = Array.prototype.slice.call(arguments, 2); return HTMLElement.prototype.appendChild.apply(t, i.concat(Array.prototype.slice.call(arguments))) } t.$.itemContainer.innerHTML = "", e instanceof HTMLElement && t.$.itemContainer.appendChild(e) } }, { key: "insertBefore", value: function (e, t) { var i = this; if (!i.isCompleted) { var r = Array.prototype.slice.call(arguments, 2); return HTMLElement.prototype.insertBefore.apply(i, r.concat(Array.prototype.slice.call(arguments))) } t.parentNode.insertBefore(e, t) } }, { key: "removeChild", value: function (e) { var t = this; if (!t.isCompleted) { var i = Array.prototype.slice.call(arguments, 2); return HTMLElement.prototype.removeChild.apply(t, i.concat(Array.prototype.slice.call(arguments))) } e instanceof HTMLElement && t.$.itemContainer.removeChild(e) } }, { key: "ready", value: function () { babelHelpers.get(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "ready", this).call(this); var e = this; "" !== e.label ? e.innerHTML = e.label : "" !== e.innerHTML && (e.label = e.innerHTML), e._setDisplayMode(e.displayMode) } }, { key: "propertyChangedHandler", value: function (e, i, r) { var o = this; if (babelHelpers.get(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "propertyChangedHandler", this).call(this, e, i, r), "hidden" === e && (r ? o.$.addClass("jqx-hidden") : o.$.removeClass("jqx-hidden")), "displayMode" === e && o._setDisplayMode(r), "label" === e) { var l = o.context; o.context = document, o.innerHTML = r; o.getListBox().onItemUpdated(o), o.context = l } if ("innerHTML" === e) { o.getListBox().onItemUpdated(o) } } }, { key: "getListBox", value: function () { for (var e = this, t = e.parentNode; t instanceof JQX.ListBox == !1 && null !== t;) t = t.parentNode; return t } }, { key: "attached", value: function () { var e = this; babelHelpers.get(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "attached", this).call(this), e.ownerListBox = e.getListBox(), e.ownerListBox && e.ownerListBox.onItemAttached(e) } }, { key: "detached", value: function () { var e = this; babelHelpers.get(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "detached", this).call(this), e.ownerListBox && e.ownerListBox.onItemDetached(e) } }, { key: "_itemOnMouseEnter", value: function () { var e = this; !e.disabled && e.ownerListBox && e.$.addClass("hovered") } }, { key: "_itemOnMouseMove", value: function (e) { var t = this; if (!t.disabled && t.ownerListBox && JQX.ListBox.DragDrop.Dragging && t.ownerListBox.reorder && !JQX.Utilities.Core.isMobile) { if (JQX.ListBox.DragDrop.DropDetails = { item: t, position: "top" }, !t.ownerListBox._areCSSVarsSupported) { if (t.ownerListBox._indexOf(t) === t.ownerListBox._items.length - 1 || t.parentNode.lastElementChild === t) { var i = t.getBoundingClientRect(); e.pageY > i.top + i.height / 2 - 1 && (JQX.ListBox.DragDrop.DropDetails = { item: t, position: "bottom" }) } return } if (t.$.removeClass("jqx-list-item-line-feedback"), t.$.removeClass("jqx-list-item-bottom-line-feedback"), t.ownerListBox._indexOf(t) === t.ownerListBox._items.length - 1 || t.parentNode.lastElementChild === t) { var r = t.getBoundingClientRect(); e.pageY > r.top + r.height / 2 - 1 ? (t.$.addClass("jqx-list-item-bottom-line-feedback"), JQX.ListBox.DragDrop.DropDetails = { item: t, position: "bottom" }) : t.$.addClass("jqx-list-item-line-feedback") } else t.$.addClass("jqx-list-item-line-feedback") } } }, { key: "_itemOnMouseLeave", value: function () { var e = this; !e.disabled && e.ownerListBox && (JQX.ListBox.DragDrop.Dragging && (e.$.removeClass("jqx-list-item-line-feedback"), e.$.removeClass("jqx-list-item-bottom-line-feedback")), e.$.removeClass("hovered")) } }, { key: "_setDisplayMode", value: function (e) { var t = this, i = t.getListBox(); if (i) { var r = "checkBox" === i.selectionMode || "radioButton" === i.selectionMode ? i.selectionMode : "default"; t.displayMode = e = r } if ("default" === e) return void t.$itemInput.addClass("jqx-hidden"); t.$itemInput.removeClass("jqx-hidden") } }], [{ key: "properties", get: function () { return { displayMode: { allowedValues: ["default", "checkBox", "radioButton"], value: "default", type: "string" }, focused: { value: !1, type: "boolean" }, grouped: { value: !1, type: "boolean" }, selected: { value: !1, type: "boolean" }, value: { value: "", type: "string" }, label: { value: "", type: "string" }, group: { value: "", type: "string" }, hidden: { value: !1, type: "boolean" } } } }, { key: "listeners", get: function () { return { mouseenter: "_itemOnMouseEnter", mouseleave: "_itemOnMouseLeave", mousemove: "_itemOnMouseMove" } } }]), t }(JQX.ContentElement)), JQX("jqx-list-items-group", function (e) { function t() { return babelHelpers.classCallCheck(this, t), babelHelpers.possibleConstructorReturn(this, (t.__proto__ || Object.getPrototypeOf(t)).apply(this, arguments)) } return babelHelpers.inherits(t, e), babelHelpers.createClass(t, [{ key: "template", value: function () { return '<div id="container">\n                 <span id="itemsLabel" class ="jqx-list-items-group-label">[[label]]</span>\n                 <div id="listItemsGroupContainer" inner-h-t-m-l=\'[[innerHTML]]\' class ="jqx-list-items-group-container">\n                    <content></content>\n                 </div>\n               </div>' } }, { key: "appendChild", value: function (e) { var t = this; if (!t.isCompleted) { var i = Array.prototype.slice.call(arguments, 2); return HTMLElement.prototype.appendChild.apply(t, i.concat(Array.prototype.slice.call(arguments))) } e instanceof HTMLElement && t.$.listItemsGroupContainer.appendChild(e) } }, { key: "removeChild", value: function (e) { var t = this; if (!t.isCompleted) { var i = Array.prototype.slice.call(arguments, 2); return HTMLElement.prototype.removeChild.apply(t, i.concat(Array.prototype.slice.call(arguments))) } e instanceof HTMLElement && t.$.listItemsGroupContainer.removeChild(e) } }, { key: "getListBox", value: function () { for (var e = this, t = e.parentNode; t instanceof JQX.ListBox == !1 && null !== t;) t = t.parentNode; return t } }, { key: "attached", value: function () { var e = this; babelHelpers.get(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "attached", this).call(this), e.ownerListBox || (e.ownerListBox = e.getListBox()), e.ownerListBox && e.ownerListBox.onListItemsGroupAttached && e.ownerListBox.onListItemsGroupAttached(e) } }, { key: "detached", value: function () { var e = this; babelHelpers.get(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "detached", this).call(this), e.ownerListBox && e.ownerListBox.onListItemsGroupDetached && e.ownerListBox.onListItemsGroupDetached(e) } }], [{ key: "properties", get: function () { return { label: { value: "", type: "string" } } } }]), t }(JQX.ContentElement)), JQX("jqx-list-box", function (e) {
    function t() { return babelHelpers.classCallCheck(this, t), babelHelpers.possibleConstructorReturn(this, (t.__proto__ || Object.getPrototypeOf(t)).apply(this, arguments)) } return babelHelpers.inherits(t, e), babelHelpers.createClass(t, [{ key: "_downHandler", value: function (e) { var t = this; if (!(t.disabled || t.displayLoadingIndicator || t.readonly)) { var i = e.originalEvent.target, r = null; if (!(i instanceof JQX.ListItem) || i.disabled || i instanceof JQX.ListItemsGroup) for (; i.parentElement;) { if (i instanceof JQX.ListItem && !i.disabled && !(i instanceof JQX.ListItemsGroup)) { r = i.dataItem; break } i = i.parentElement } else r = i.dataItem; !JQX.Utilities.Core.isMobile && r && (t._focus(r), t.select(r)), JQX.ListBox.DragDrop.StartTime = new Date, JQX.ListBox.DragDrop.StartPosition = { left: e.pageX, top: e.pageY }, r && !JQX.ListBox.DragDrop.Feedback && t.reorder && (JQX.ListBox.DragDrop.Feedback = document.createElement("span"), JQX.ListBox.DragDrop.Feedback.appendChild(r.offsetHeight ? r.cloneNode(!0) : t._createItem(r)), JQX.ListBox.DragDrop.Item = r, JQX.Utilities.Extend(JQX.ListBox.DragDrop.Feedback).addClass("jqx-popup jqx-list-item jqx-list-item-feedback")) } } }, { key: "_pointerUpHandler", value: function (e) { var t = e.target, i = function (e) { var t = e.ownerListBox; t.disabled || t.displayLoadingIndicator || "none" === t.selectionMode || e.grouped || (t._focus(e), t.select(e)) }; if (e.target instanceof JQX.ListItem && !e.target.disabled && !(e.target instanceof JQX.ListItemsGroup)) return void i(t.dataItem); for (; t.parentElement;) { if (t instanceof JQX.ListItem && !t.disabled && !(t instanceof JQX.ListItemsGroup)) { i(t.dataItem); break } t = t.parentElement } } }, { key: "_upHandler", value: function (e) { var t = this; if (!t.disabled && !t.readonly) { if (JQX.Utilities.Core.isMobile && !JQX.ListBox.DragDrop.Dragging) { var i = Math.abs(e.pageX - JQX.ListBox.DragDrop.StartPosition.left), r = Math.abs(e.pageY - JQX.ListBox.DragDrop.StartPosition.top), o = i >= 0 && i <= 3 && r >= 0 && r <= 3; JQX.Utilities.Core.isMobile && new Date - JQX.ListBox.DragDrop.StartTime >= 300 && (o = !1), o && t._pointerUpHandler(e.originalEvent) } if (JQX.ListBox.DragDrop.Feedback) { if (JQX.ListBox.DragDrop.Feedback.parentNode && JQX.ListBox.DragDrop.Feedback.parentNode.removeChild(JQX.ListBox.DragDrop.Feedback), JQX.ListBox.DragDrop.Feedback = null, JQX.Utilities.Core.isMobile && JQX.ListBox.DragDrop.Dragging) for (var l = 0; l < JQX.ListBox.DragDrop.ListBoxes.length; l++) { var n = JQX.ListBox.DragDrop.ListBoxes[l], a = n.getBoundingClientRect(); if (n.reorder && (a.left <= e.pageX && e.pageX <= a.right && a.top <= e.pageY && e.pageY <= a.bottom)) for (var s = 0; s < n._items.length; s++) { var d = n._items[s], c = d.getBoundingClientRect(); if ((n._indexOf(d) === n._items.length - 1 || d.parentNode.lastElementChild === d) && e.pageY >= c.top + c.height / 2 && e.pageY <= c.bottom) { JQX.ListBox.DragDrop.DropDetails = { item: d, position: "bottom" }; break } if (e.pageY >= c.top && e.pageY <= c.bottom) { JQX.ListBox.DragDrop.DropDetails = { item: d, position: "top" }; break } } } if (JQX.ListBox.DragDrop.DropDetails) { var p = JQX.ListBox.DragDrop.DropDetails.item; if (p.$.removeClass("jqx-list-item-line-feedback"), p.$.removeClass("jqx-list-item-bottom-line-feedback"), JQX.ListBox.DragDrop.Item !== p) { var u = JQX.ListBox.DragDrop.Item; if ("none" !== u.ownerListBox.dropAction) { p.ownerListBox !== u.ownerListBox && "move" === u.ownerListBox.dropAction && JQX.ListBox.DragDrop.Item.ownerListBox.removeChild(JQX.ListBox.DragDrop.Item), "copy" === u.ownerListBox.dropAction && (u = u.cloneNode(!0)), JQX.ListBox.DragDrop.Item.group = p.group; var h = JQX.ListBox.DragDrop.DropDetails.item.ownerListBox; "top" === JQX.ListBox.DragDrop.DropDetails.position ? h.insertBefore(u, p) : p.parentNode.lastElementChild === p ? p.parentNode.appendChild(u) : h.appendChild(u, p), h.ensureVisible(u), "checkBox" === h.selectionMode || "radioButton" === h.selectionMode ? h._focus(u) : (h.clearSelection(), h.select(u)) } } var m = JQX.ListBox.DragDrop.Item; t.$.fireEvent("reorderEnd", { position: { left: e.pageX, top: e.pageY }, target: e.originalEvent.target, selected: m.selected, disabled: m.disabled, index: t._indexOf(m), label: m.label, value: m.value }) } else { var f = JQX.ListBox.DragDrop.Item; t.$.fireEvent("reorderEnd", { position: { left: e.pageX, top: e.pageY }, target: e.originalEvent.target, selected: f.selected, disabled: f.disabled, index: t._indexOf(f), label: f.label, value: f.value }) } JQX.ListBox.DragDrop.Dragging = !1, JQX.ListBox.DragDrop.Item = null, JQX.ListBox.DragDrop.DropDetails = null } for (var g = 0; g < JQX.ListBox.DragDrop.ListBoxes.length; g++) { var _ = JQX.ListBox.DragDrop.ListBoxes[g]; _._dragInterval && clearInterval(_._dragInterval) } } } }, { key: "_itemsContainerMoveHandler", value: function (e) { var t = this; if (JQX.ListBox.DragDrop.Dragging) return t._moveHandler(e), e.originalEvent.preventDefault(), e.originalEvent.stopPropagation(), !1 } }, { key: "_moveHandler", value: function (e) { if (JQX.ListBox.DragDrop.Feedback) { if (JQX.ListBox.DragDrop.Dragging) { JQX.ListBox.DragDrop.Feedback.style.left = 5 + e.pageX + "px", JQX.ListBox.DragDrop.Feedback.style.top = 5 + e.pageY + "px"; for (var t = 0; t < JQX.ListBox.DragDrop.ListBoxes.length; t++) !function (t) { var i = JQX.ListBox.DragDrop.ListBoxes[t]; i._dragInterval && clearInterval(i._dragInterval), i._dragInterval = setInterval(function () { var t = i.getBoundingClientRect(); t.left <= e.pageX && t.left + t.width >= e.pageX && (e.pageY >= t.top && e.pageY <= t.top + 20 ? i._scrollView.scrollTop -= 2 : e.pageY >= t.bottom - 20 && e.pageY <= t.bottom && (i._scrollView.scrollTop += 2)) }, 1) }(t); return e.preventDefault(), e.stopPropagation(), e.originalEvent.preventDefault(), e.originalEvent.stopPropagation(), !1 } var i = Math.abs(e.pageX - JQX.ListBox.DragDrop.StartPosition.left), r = Math.abs(e.pageY - JQX.ListBox.DragDrop.StartPosition.top), o = new Date - JQX.ListBox.DragDrop.StartTime, l = i >= 5 && i <= 15 || r >= 5 && r <= 15; if (JQX.Utilities.Core.isMobile && (o < 300 || o > 1e3) && (l = !1), l) { JQX.ListBox.DragDrop.Dragging = !0, JQX.ListBox.DragDrop.Feedback.style.left = 5 + e.pageX + "px", JQX.ListBox.DragDrop.Feedback.style.top = 5 + e.pageY + "px", document.body.appendChild(JQX.ListBox.DragDrop.Feedback), e.preventDefault(), e.stopPropagation(), e.originalEvent.preventDefault(), e.originalEvent.stopPropagation(); var n = this, a = JQX.ListBox.DragDrop.Item; n.$.fireEvent("reorderStart", { position: { left: e.pageX, top: e.pageY }, target: e.originalEvent.target, selected: a.selected, disabled: a.disabled, index: n._indexOf(a), label: a.label, value: a.value }) } } } }, { key: "_focusHandler", value: function () { this._focused = !0 } }, { key: "_blurHandler", value: function () { this._focused = !1 } }, { key: "template", value: function () { return '<div id="container" class="jqx-container">\n                 <input id="filterInput" class ="jqx-hidden"  disabled="[[disabled]]" placeholder=\'[[filterInputPlaceholder]]\'>\n                 <div id="itemsContainer" class="jqx-list-items-container">\n                      <div id="placeholder" class ="jqx-placeholder">[[placeholder]]</div>\n                      <div id="itemsInnerContainer" inner-h-t-m-l=\'[[innerHTML]]\' class ="jqx-list-items-inner-container">\n                      <content></content>\n                    </div>\n                 </div>\n                 <jqx-scroll-bar id="verticalScrollBar" disabled="[[disabled]]" orientation="vertical"></jqx-scroll-bar>\n                 <jqx-scroll-bar id="horizontalScrollBar" disabled="[[disabled]]" ></jqx-scroll-bar>\n                 <div id="loadingIndicatorContainer" class ="jqx-loader-container">\n                    <span id="loadingIndicator" class="jqx-loader"></span>\n                    <span id="loadingIndicatorPlaceHolder" class ="jqx-loader-label jqx-hidden">[[loadingIndicatorPlaceholder]]</span>\n                 </div>\n                </div>' } }, { key: "appendChild", value: function (e) { var t = this; if (!t.isCompleted) { var i = Array.prototype.slice.call(arguments, 2); return HTMLElement.prototype.appendChild.apply(t, i.concat(Array.prototype.slice.call(arguments))) } t.isVirtualized ? (t._items.indexOf(e) >= -1 && t._items.splice(t._items.indexOf(e), 1), t._items.splice(t._indexOf(e), 1), t._items.push(e), t._refreshItems()) : t.$.itemsInnerContainer.appendChild(e) } }, { key: "insertBefore", value: function (e, t) { var i = this; if (!i.isCompleted) { var r = Array.prototype.slice.call(arguments, 2); return HTMLElement.prototype.insertBefore.apply(i, r.concat(Array.prototype.slice.call(arguments))) } i.isVirtualized ? (i._items.indexOf(e) >= -1 && i._items.splice(i._items.indexOf(e), 1), i._items.splice(i._indexOf(t), 0, e), i._refreshItems()) : t.parentNode.insertBefore(e, t) } }, { key: "removeChild", value: function (e) { var t = this; if (!t.isCompleted) { var i = Array.prototype.slice.call(arguments, 2); return HTMLElement.prototype.removeChild.apply(t, i.concat(Array.prototype.slice.call(arguments))) } t.isVirtualized ? (t._items.splice(t._indexOf(e), 1), t._refreshItems()) : e.parentNode && e.parentNode.removeChild(e) } }, { key: "propertyChangedHandler", value: function (e, i, r) { babelHelpers.get(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "propertyChangedHandler", this).call(this, e, i, r); var o = this; switch (e) { case "dataSource": case "valueMember": case "groupMember": case "displayMember": o.clearSelection(), o._dataBind(); break; case "displayLoadingIndicator": o._setLoadingIndicatorVisibility(); break; case "filterable": o._refreshFilter(), o._refreshLayout(); break; case "grouped": r ? o._group() : o._ungroup(), o._refreshSelection(), o._refreshLayout(); break; case "itemTemplate": if (null === r || "" === r) return o._items.map(function (e) { return e.innerHTML = e.label }), delete o._bindingDetails, void o._refreshLayout(); o._handleItemTemplate(r) && (o._items.map(function (e) { return o._applyTemplate(e) }), o._refreshLayout()); break; case "selectedIndexes": case "selectedValues": if (o.clearSelection(), "selectedIndexes" === e) for (var l = 0; l < r.length; l++) { var n = r[l], a = o._items[n]; a && o.select(a) } else for (var s = 0; s < r.length; s++) { var d = r[s], c = o.getItem(d); c && o.select(c) } break; case "selectionMode": var p = "checkBox" === o.selectionMode || "radioButton" === o.selectionMode ? o.selectionMode : "default"; o._refreshSelection(), o._items.forEach(function (e) { return e.displayMode = p }), o._recycle(); break; case "sorted": r ? o._sort() : o._unsort(), o._refreshSelection(), o._refreshLayout() } } }, { key: "_refreshSelection", value: function () { var e = this; if (e._items && 0 !== e._items.length) { var t = e.selectedValues; e.selectedIndexes = [], e.selectedValues = []; for (var i = 0; i < e._items.length; i++) { var r = e._items[i]; r.selected = !1, t.indexOf(r.value) >= 0 && e._select(r, !0) } e._recycle() } } }, { key: "clearSelection", value: function () { var e = this; if (e._items && 0 !== e._items.length) { for (var t = 0; t < e.selectedIndexes.length; t++) { var i = e.selectedIndexes[t]; if (e._items[i] !== undefined) { e._items[i].selected = !1 }}e.selectedIndexes=[],e.selectedValues=[],e._recycle()}}},{key:"ensureVisible",value:function(e){var t=this;return!("string"==typeof e&&!(e=t.getItem(e)))&&((e.top<=t._scrollView.scrollTop||e.top+e.height>=t._scrollView.scrollTop+t.offsetHeight)&&(t._scrollView.scrollTop=e.top,t.isVirtualized||(t.$.itemsContainer.scrollTop=t._scrollView.scrollTop)),0===t._indexOf(e)?(t._scrollView.scrollTop=0,t.isVirtualized||(t.$.itemsContainer.scrollTop=t._scrollView.scrollTop)):t._indexOf(e)===t._items.length-1&&(t._scrollView.scrollTop=t._scrollView.scrollHeight,t.isVirtualized||(t.$.itemsContainer.scrollTop=t._scrollView.scrollTop)),!0)}},{key:"ready",value:function(){babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"ready",this).call(this);var e=this;e._checkMissingModules(),e._areCSSVarsSupported=JQX.Utilities.Core.CSSVariablesSupport(),e._keysPressed={},e._incrementalSearchQuery="",e._incrementalSearchItems=[],e._previousEntry="",e.isUpdating=0,e._scrollView=new JQX.Utilities.Scroll(e,e.$.horizontalScrollBar,e.$.verticalScrollBar),e._scrollView.hScrollBar.$.addClass("jqx-hidden"),e._scrollView.vScrollBar.$.addClass("jqx-hidden"),e.setFocusable(!0),e._setLoadingIndicatorVisibility(),e._refreshFilter(),e._initializeInnerHTML(),e._dataBind()}},{key:"attached",value:function(){var e=this;babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"attached",this).call(this),JQX.ListBox.DragDrop||(JQX.ListBox.DragDrop={ListBoxes:[]}),JQX.ListBox.DragDrop.ListBoxes.push(e)}},{key:"detached",value:function(){var e=this;if(babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"detached",this).call(this),JQX.ListBox.DragDrop&&JQX.ListBox.DragDrop.ListBoxes){var i=JQX.ListBox.DragDrop.ListBoxes.indexOf(e);JQX.ListBox.DragDrop.ListBoxes.splice(i,1)}}},{key:"_createItem",value:function(e,t,i){var r=this,o="checkBox"===r.selectionMode||"radioButton"===r.selectionMode?r.selectionMode:"default",l=i?{}:document.createElement("jqx-list-item");l.ownerListBox=r,"number"==typeof e&&(e=""+e);var n=function(t,i){return void 0!==e[t]?""+e[t]:e[i]},a="string"==typeof e?e:n(r.displayMember,"label"),s="string"==typeof e?e:n(r.valueMember,"value"),d=n(r.groupMember,"group");return void 0===a&&(a=void 0!==t?""+t:""),l.label=l.innerHTML=""+a,void 0===s&&(s=void 0!==t?""+t:a),l.value=""+s,l.displayMode=o,l.selected=!!e.selected&&e.selected,l.disabled=!!e.disabled&&e.disabled,e.title&&(l.title=e.title),d&&(l.group=""+d),l}},{key:"_initializeRecyclingItems",value:function(){var e=this;if(e.dataSource&&(!e.dataSource||0!==e.dataSource.length)&&e.isVirtualized){var t=0,i=e.offsetHeight;e.$.itemsInnerContainer.innerHTML="",e._recyclingItems=[];for(var r=0;r<e.dataSource.length;r++){var o=e.dataSource[r],l=e._createItem(o);if(e.itemHeight&&"auto"!==e.itemHeight&&(l.style.height=e.itemHeight+"px"),e.$.itemsInnerContainer.appendChild(l),t+=l.offsetHeight,l.dataItem=e._items[r],e._recyclingItems.push(l),t>1.5*i)break}}}},{key:"_dataBind",value:function(){var e=this;if(null!==e.dataSource){e.isUpdating++;var t=function(t){e._items=[],e._groups=[];for(var i=0;i<e.dataSource.length;i++){var r=e.dataSource[i],o=t?e._createItem(r,i):e._createItem(r,i,!0);o.dataIndex=i,o.dataItem=o,e._items[i]=o,t&&t.appendChild(o)}};if(e.isVirtualized)t(),e._initializeRecyclingItems();else{var i=document.createDocumentFragment();e.$.itemsInnerContainer.innerHTML="",t(i),e.$.itemsInnerContainer.appendChild(i)}e.isUpdating--}var r=e.querySelectorAll("jqx-list-item"),o=function(){e.isUpdating++,e.dataSource||(e._initializeHtmlListItems(),e._initializeHtmlListGroups()),e.grouped&&e._group(),e.sorted&&e._sort(),e._refreshLayout(),e._initializeSelection(),e.isInitialized=!0,e.isUpdating--};0===r.length?o():e._ensureItemsReady(r,o)}},{key:"_ensureItemsReady",value:function(e,t){var i=this,r=function(){var i=function(t){for(var i=0;i<e.length;i++)e[i].context="node"===t?e[i]:document};i("node"),t(),i()};if(0===e.length)r();else{i._nodesReadyListeners=0;for(var o=0;o<e.length;o++){var l=e[o],n=function(){0===--i._nodesReadyListeners&&(r(),delete i._nodesReadyListeners)}.bind(i);l.isCompleted||(i._nodesReadyListeners++,l.onCompleted=n)}0===i._nodesReadyListeners&&r()}}},{key:"_initializeInnerHTML",value:function(){var e=this;e.$.itemsInnerContainer.innerHTML.indexOf("<option")>=0?e.$.itemsInnerContainer.innerHTML=e.$.itemsInnerContainer.innerHTML.replace(/<optgroup/gi,"<jqx-list-items-group").replace(/<\/optgroup/gi,"</jqx-list-items-group").replace(/<option/gi,"<jqx-list-item").replace(/<\/option/gi,"</jqx-list-item"):e.$.itemsInnerContainer.innerHTML.indexOf("<ul")>=0&&(e.$.itemsInnerContainer.innerHTML=e.$.itemsInnerContainer.innerHTML.replace(/<ul/gi,"<jqx-list-items-group").replace(/<\/ul/gi,"</jqx-list-items-group").replace(/<li/gi,"<jqx-list-item").replace(/<\/li/gi,"</jqx-list-item"))}},{key:"_initializeHtmlListItems",value:function(){var e=this,t=e.querySelectorAll("jqx-list-item"),i="checkBox"===e.selectionMode||"radioButton"===e.selectionMode?e.selectionMode:"default",r=function(e,t,i){return void 0!==e[t]?""+e[t]:e[i]};e._items=[];for(var o=0,l=0;l<t.length;l++){var n=t[l];n.dataIndex=l,n.label=n.innerHTML,n.dataItem=n,n.top||(n.top=o),n.height||(n.height=n.offsetHeight),o+=n.height,n.value||(n.value=""+l);var a=r(n,e.displayMember,"label"),s=r(n,e.valueMember,"value"),d=r(n,e.groupMember,"group");n.label!==a&&(n.label=a),n.value!==s&&(n.value=s),n.group!==d&&(n.group=d),n.displayMode=i,n.selected&&(e.selectedIndexes.push(l),e.selectedValues.push(n.value)),e._items.push(n)}e.itemTemplate&&e._handleItemTemplate(e.itemTemplate)&&e._items.map(function(t){return e._applyTemplate(t)})}},{key:"_group",value:function(){var e=this;e.isUpdating++;var t=[],i=[];e.sorted&&e._unsort();for(var r=0;r<e._items.length;r++){var o=e._items[r],l=o.group||o.innerHTML.toUpperCase().charAt(0)||o.label.toUpperCase().charAt(0);t[l]?t[l].items.push(o):t[t.length++]=t[l]={items:[o],label:l}}if(e.isVirtualized){e._groups=[];for(var n=0;n<t.length;n++){var a=t[n];a.dataIndex=n,a.grouped=!0,a.hidden=!1,a.displayMode="default",i.push(a);for(var s=0;s<t[n].items.length;s++){var d=a.items[s];d.ownerGroup=a,i.push(d)}}e._groups=t,e._items=i}else{for(;e.$.itemsInnerContainer.firstChild;)e.$.itemsInnerContainer.removeChild(e.$.itemsInnerContainer.firstChild);var c=document.createDocumentFragment();e._groups=[];for(var p=0;p<t.length;p++){var u=t[p],h=document.createElement("jqx-list-items-group");h.label=u.label,h.dataIndex=p;for(var m=0;m<t[p].items.length;m++){var f=u.items[m];i.push(f),h.appendChild(f)}e._groups.push(h),c.appendChild(h)}e._items=i,e.$.itemsInnerContainer.appendChild(c)}e.sorted&&e._sort(),e.isUpdating--}},{key:"_ungroup",value:function(){var e=this;e.isUpdating++,e._groups=[],e._unsort();var t=[];if(e.isVirtualized)for(var i=0;i<e._items.length;i++){var r=e._items[i];r.grouped||t.push(r)}else{for(var o=document.createDocumentFragment(),l=0;l<e._items.length;l++){var n=e._items[l];o.appendChild(n),t.push(n)}t.length>0&&(e.$.itemsInnerContainer.innerHTML="",e.$.itemsInnerContainer.appendChild(o))}e._items=t,e.sorted&&e._sort(),e.isUpdating--}},{key:"_initializeHtmlListGroups",value:function(){var e=this,t=e.$.itemsInnerContainer.querySelectorAll("jqx-list-items-group");e._groups=[];for(var i=0;i<t.length;i++){var r=t[i];r.dataIndex=i,e._groups.push(r)}}},{key:"_initializeSelection",value:function(){var e=this;"one"!==e.selectionMode&&"oneOrMany"!==e.selectionMode&&"default"!==e.selectionMode||0===e.selectedIndexes.length&&e._items.length>0&&(e.selectedIndexes.push(0),e.selectedValues.push(e._items[0].value));var t=e.selectedIndexes.slice(0),i=e.selectedValues.slice(0);e.clearSelection();for(var r=0;r<e._items.length;r++){var o=e._items[r];(t.indexOf(r)>=0||i.indexOf(o.value||o.label)>=0)&&(e._focusedItem&&(e._focusedItem.focused=!1),e._focusedItem=null,e.select(o))}}},{key:"onItemUpdated",value:function(){var e=this;!e.isInitialized||e.isUpdating>0||e._refreshLayout()}},{key:"_refreshItems",value:function(){var e=this;if(e.isInitialized&&!(e.isUpdating>0)){if(e.isUpdating++,e.grouped?e._ungroup():e.sorted&&e._unsort(),!e.isVirtualized){e._items=[];for(var t=e.querySelectorAll("jqx-list-item"),i=0;i<t.length;i++)t[i].dataIndex=i,e._items.push(t[i])}e.grouped?e._group():e.sorted&&e._sort(),e._refreshLayout(),e.isUpdating--}}},{key:"onItemAttached",value:function(){this._refreshItems()}},{key:"onItemDetached",value:function(){this._refreshItems()}},{key:"_applyIncrementalSearch",value:function(e){var t=this;null===t.incrementalSearchDelay||isNaN(t.incrementalSearchDelay)||["Shift","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Control","Home","End","PageUp","PageDown"].indexOf(e)>-1||(0!==t._incrementalSearchQuery.indexOf(e)&&(t._incrementalSearchQuery+=e),t._incrementalSearchTimer&&clearTimeout(t._incrementalSearchTimer),t._incrementalSearch(),t._incrementalSearchTimer=setTimeout(function(){t._incrementalSearchQuery=""},t.incrementalSearchDelay))}},{key:"select",value:function(e){var t=this;if(("string"!=typeof e||(e=t.getItem(e)))&&("number"!=typeof e||(e=t.getItem(e)))&&!e.grouped){switch(t._focusedItem||"none"===t.selectionMode||(t._focusedItem=e,e.focused=!0),t.selectionMode){case"one":return(1!==t.selectedIndexes.length||t.selectedIndexes[0]!==t._indexOf(e))&&(t.selectedIndexes.length>=1&&t.clearSelection(),t._select(e),!0);case"zeroOrOne":return 1===t.selectedIndexes.length&&t.selectedIndexes[0]===t._indexOf(e)?(t.clearSelection(),!0):(t.selectedIndexes.length>=1&&t.clearSelection(),t._select(e),!0);case"radioButton":if(t.$.itemsInnerContainer.querySelectorAll("jqx-list-items-group").length>0){var i=t._focusedItem.parentNode;if(!e.selected){for(var r in i.children){var o=i.children[r];o.selected&&t.unselect(o)}t._select(e)}return!0}if(t.isVirtualized&&t._groups.length>0){var l=t._focusedItem.ownerGroup;if(!e.selected){for(var n in l.items){var a=l.items[n];a.selected&&t.unselect(a)}t._select(e)}return!0}return e.selected||(t.selectedIndexes.length>=1&&t.clearSelection(),t._select(e)),!0;case"oneOrMany":return e.selected?t.selectedIndexes.length>1&&t.unselect(e):t._select(e),!0;case"zeroOrMany":case"checkBox":return e.selected?t.unselect(e):t._select(e),!0;case"default":if(t._keysPressed.Control)return t.selectedIndexes.length>1&&e.selected?(t.unselect(e),t._focus(t._items[t.selectedIndexes[0]])):t._select(e),!0;if(t._keysPressed.Shift){var s=t._items[t.selectedIndexes[0]],d=void 0;if(t.clearSelection(),t._select(s),t._indexOf(s)>t._indexOf(e))for(d=t._indexOf(s)-1;d>=t._indexOf(e);)t._select(t._items[d]),d--;else for(d=t._indexOf(s)+1;d<=t._indexOf(e);)t._select(t._items[d]),d++;return!0}return t.clearSelection(),t._select(e),!0}return!1}}},{key:"_applyTemplate",value:function(e,t){var i=this;if(null!==i.itemTemplate&&i._bindingDetails&&0!==i._bindingDetails.length){for(var r=i._bindingDetails.length,o=document.importNode(i._template.content,!0),l=void 0,n=void 0,a=0;a<r;a++){l=o.childNodes[i._bindingDetails[a].childNodeIndex],n=i._bindingDetails[a].bindingString.length;for(var s=0;s<n;s++)l.innerHTML=l.innerHTML.replace(i._bindingDetails[a].bindingString[s],e.label)}e.innerHTML="";for(var d=0;d<o.childNodes.length;d++)o.childNodes[d].outerHTML&&(e.innerHTML+=o.childNodes[d].outerHTML);!1!==t&&(i._scrollHeightTimer&&(clearInterval(i._scrollHeightTimer),i._scrollHeightCounter=0),i._scrollHeightTimer=setInterval(function(){i._lastScrollHeight===i.$.itemsInnerContainer.scrollHeight&&10!==i._scrollHeightCounter||(i._refreshLayout(),clearInterval(i._scrollHeightTimer)),i._lastScrollHeight=i.$.itemsInnerContainer.scrollHeight,i._scrollHeightCounter++},50))}}},{key:"_checkMissingModules",value:function(){var e=[];if(void 0===JQX.ScrollBar&&e.push("jqxscrollbar.js"),e.length>0){var t=this;t.error(t.localize("missingReference",{elementType:t.nodeName.toLowerCase(),files:e.join(", ")}))}}},{key:"_filterItems",value:function(){var e=this,t=e._items,i=e.$.filterInput.value;if(0!==t.length){for(var r=e._queryItems(i,e.filterMode),o=0;o<t.length;o++)t[o].hidden=!0;for(var l=0;l<r.length;l++){r[l].hidden=!1}if(e.grouped&&e.isVirtualized)for(var n=0;n<e._groups.length;n++){for(var a=e._groups[n],s=a.items,d=!0,c=0;c<s.length;c++)s[c].hidden||(d=!1);d&&(a.hidden=!0)}if(e.grouped&&!e.isVirtualized)for(var p=0;p<e._groups.length;p++){for(var u,h=e._groups[p],m=(u=[]).concat.apply(u,babelHelpers.toConsumableArray(h.querySelectorAll("jqx-list-item"))),f=!0,g=0;g<m.length;g++)m[g].$.hasClass("jqx-hidden")||(f=!1);f?h.$.addClass("jqx-hidden"):h.$.removeClass("jqx-hidden")}e._filteredItems=r,e._refreshLayout(),e._refreshSelection()}}},{key:"_getNextItem",value:function(e){for(var t=this,i=t._items,r=t._items.length,o=Math.max(e+1,0);o<r;){var l=i[o];if(!l.disabled&&!l.hidden&&!l.grouped)return l;o++}return i[e]}},{key:"_getPreviousItem",value:function(e){for(var t=this,i=t._items,r=Math.max(e-1,0);r>-1;){var o=i[r];if(!o.disabled&&!o.hidden&&!o.grouped)return o;r--}return i[e]}},{key:"update",value:function(e,t){var i=this,r=i._items[e];if(r){if("string"==typeof t)r.label=t,void 0===r.value&&(r.value=t);else for(var o in t)r[o]=t[o];(i.sorted||i.grouped||i.isVirtualized)&&i._refreshItems()}else i.error(i.localize("indexOutOfBound",{elementType:i.nodeName.toLowerCase(),method:"update"}))}},{key:"insert",value:function(e,t){var i=this;if(e||(e=0),t instanceof Array){i.isUpdating++;for(var r=0;r<t.length;r++){var o=t[r],l=i._createItem(o);e>=i._items.length||0===i._items.length?i.appendChild(l):i.insertBefore(l,i._items[e])}i.isUpdating--,i._refreshItems()}else{var n=i._createItem(t);e>=i._items.length||0===i._items.length?i.appendChild(n):i.insertBefore(n,i._items[e])}}},{key:"remove",value:function(e){var t=this,i=t._items[e];i?t.isVirtualized?(t._items.splice(e,1),t._refreshItems()):i.parentNode.removeChild(i):t.error(t.localize("indexOutOfBound",{elementType:t.nodeName.toLowerCase(),method:"remove"}))}},{key:"_queryItems",value:function(e,t){var i=this,r=[];if(0===e.length)return i._items;for(var o=0;o<i._items.length;o++){var l=function(e,i){if(e.grouped)return e;switch(t){case"startsWith":if(0===e.label.indexOf(i))return e;break;case"startsWithIgnoreCase":if(0===e.label.toLowerCase().indexOf(i.toLowerCase()))return e;break;case"none":if(e.label.indexOf(i)<0)return e;break;case"contains":if(e.label.indexOf(i)>-1)return e;break;case"containsIgnoreCase":if(e.label.toLowerCase().indexOf(i.toLowerCase())>-1)return e;break;case"equals":if(0===e.label.localeCompare(i))return e;break;case"equalsIgnoreCase":if(0===e.label.toLowerCase().localeCompare(i.toLowerCase()))return e;break;case"endsWith":if(e.label.endsWith(i))return e;break;case"endsWithIgnoreCase":if(e.label.toLowerCase().endsWith(i.toLowerCase()))return e}return null}(i._items[o],e);l&&r.push(l)}return r}},{key:"_select",value:function(e,t){
var i=this,r=i.selectedIndexes.indexOf(i._indexOf(e)),o=i.selectedIndexes.slice(0),l=i.selectedValues.slice(0);return e.selected=!0,-1!==r?(i._recycle(),!1):(o.push(i._indexOf(e)),l.push(e.value||e.label),i.selectedIndexes=o,i.selectedValues=l,i._recycle(),i.isCompleted&&!t?(i.$.fireEvent("change",{selected:e.selected,disabled:e.disabled,index:i._indexOf(e),label:e.label,value:e.value}),!0):void 0)}},{key:"unselect",value:function(e){var t=this;if("string"!=typeof e||(e=t.getItem(e))){var i=t.selectedIndexes.indexOf(t._indexOf(e)),r=t.selectedIndexes.slice(0),o=t.selectedValues.slice(0);if(e.selected=!1,!(i>=0))return!1;if(r.splice(i,1),o.splice(i,1),t.selectedIndexes=r,t.selectedValues=o,t.isCompleted)return t.$.fireEvent("change",{selected:e.selected,disabled:e.disabled,index:t._indexOf(e),label:e.label,value:e.value}),t._recycle(),!0}}},{key:"_handleItemTemplate",value:function(e){if(null!==e&&e){var t=this;if(!("content"in document.createElement("template")))return t.error(t.localize("htmlTemplateNotSuported",{elementType:t.nodeName.toLowerCase()})),void(t.itemTemplate=null);if(null===(e=document.getElementById(e))||!("content"in e))return t.error(t.localize("invalidTemplate",{elementType:t.nodeName.toLowerCase(),property:"itemTemplate"})),void(t.itemTemplate=null);var i=e.content,r=i.childNodes.length,o=/{{\w+}}/g,l=void 0,n=void 0;t._bindingDetails=[],t._template=e;for(var a=0;a<r;a++){for(n=[];l=o.exec(i.childNodes[a].innerHTML);)n.push(l[0]);n.length>0&&t._bindingDetails.push({childNodeIndex:a,bindingString:n})}return!0}}},{key:"_handleKeyStrokes",value:function(e){var t=this,i="radioButton"===t.selectionMode||"checkBox"===t.selectionMode||"zeroOrMany"===t.selectionMode||"oneOrMany"===t.selectionMode,r=t._items;if(t.filterable&&t.$.filterInput.value.length>0&&(r=t._filteredItems),!t.disabled&&!t.readonly){switch(e){case"ArrowLeft":case"ArrowUp":t._handleArrowKeys(!0);break;case"ArrowRight":case"ArrowDown":t._handleArrowKeys(!1);break;case" ":if(t.selectedIndexes.length<1&&!t._focusedItem)return;var o=t._focusedItem?t._focusedItem:t._items[t.selectedIndexes[t.selectedIndexes.length-1]],l=function(e){e.selected&&"radioButton"!==t.selectionMode?t.unselect(e):t.select(e)};if("oneOrMany"===t.selectionMode)return void(o.selected&&t.selectedIndexes.length>1?l(o):o.selected||l(o));l(o);break;case"Home":if(0===r.length)return;i?t._focus(r[0]):(t._keysPressed.Shift||t.clearSelection(),t.select(r[0]),t._focus(r[0])),t._scrollView.scrollTop=0;break;case"End":if(0===r.length)return;i?t._focus(r[r.length-1]):(t._keysPressed.Shift||t.clearSelection(),t.select(r[r.length-1]),t._focus(r[r.length-1])),t._scrollView.scrollTop=t._scrollView.scrollHeight;break;case"PageUp":t._pageUpKeyHandler(r);break;case"PageDown":t._pageDownKeyHandler(r)}t._recycle()}}},{key:"_horizontalScrollbarHandler",value:function(e){var t=this;e.stopPropagation(),t.isVirtualized?t._recycle():t.$.itemsContainer.scrollLeft=e.detail.value}},{key:"_unsort",value:function(){var e=this;e.isUpdating++;var t=function(e,t){var i=e.dataIndex,r=t.dataIndex;return i<r?-1:i>r?1:0};if(e.isVirtualized)if(e._groups.length>0){e._groups.sort(t);for(var i=[],r=0;r<e._groups.length;r++){var o,l=e._groups[r],n=(o=[]).concat.apply(o,babelHelpers.toConsumableArray(l.items));n.sort(t),i.push(l),i=i.concat(n)}e._items=i}else e._items.sort(t);else{if(e._groups.length>0){e._groups.sort(t);for(var a=[],s=0;s<e._groups.length;s++){var d,c=e._groups[s],p=(d=[]).concat.apply(d,babelHelpers.toConsumableArray(c.querySelectorAll("jqx-list-item")));p.sort(t),a=a.concat(p)}e._items=a}else e._items.sort(t);e._applySortOrder()}e.isUpdating--}},{key:"_applySortOrder",value:function(){var e=this,t=function(e){for(var t=0;t<e.length;t++){var i=e[t],r=i.parentNode;r&&r.appendChild(i)}};t(e._items),t(e._groups)}},{key:"_sort",value:function(){var e=this;e.isUpdating++;var t=function(e,t){var i=e.label,r=t.label;return i<r?-1:i>r?1:0};if(e._groups.sort(t),e.isVirtualized)if(e._groups.length>0){for(var i=[],r=0;r<e._groups.length;r++){var o,l=e._groups[r],n=(o=[]).concat.apply(o,babelHelpers.toConsumableArray(l.items));i.push(l),n.sort(t),i=i.concat(n)}e._items=i}else e._items.sort(t);else{if(e._groups.length>0){for(var a=[],s=0;s<e._groups.length;s++){var d,c=e._groups[s],p=(d=[]).concat.apply(d,babelHelpers.toConsumableArray(c.querySelectorAll("jqx-list-item")));p.sort(t),a=a.concat(p)}e._items=a}else e._items.sort(t);e._applySortOrder()}e.isUpdating--}},{key:"getItem",value:function(e){for(var t=this,i=0;i<t._items.length;i++)if(t._items[i].value===e)return t._items[i];return null}},{key:"_focus",value:function(e){var t=this;"none"===t.selectionMode||t.disabled||t.readonly||(t._focusedItem&&(t._focusedItem.focused=!1),t._focusedItem=e,t._focusedItem.focused=!0)}},{key:"_keyDownHandler",value:function(e){var t=this;if(!t.disabled&&!t.readonly&&(!t.filterable||t.$.filterInput!==document.activeElement)&&t._focused&&(e.stopPropagation(),0!==t._items.length&&!t.disabled&&"none"!==t.selectionMode&&!t.displayLoadingIndicator)){if(t.filterable)switch(e.key){case"ArrowLeft":case"ArrowRight":return;case"ArrowUp":case"ArrowDown":e.preventDefault()}if(t._applyIncrementalSearch(e.key),!(["Shift","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Control"," ","Home","End","PageUp","PageDown"].indexOf(e.key)<0)){if(!t._focusedItem&&t._items.length>0)return void t.select(t._items[0]);switch(t.selectionMode){case"one":case"zeroOrOne":if("Shift"===e.key||"Control"===e.key||" "===e.key)return;t._handleKeyStrokes(e.key);break;case"oneOrMany":case"zeroOrMany":case"radioButton":case"checkBox":if("Shift"===e.key||"Control"===e.key)return;t._handleKeyStrokes(e.key);break;case"default":if(" "===e.key)return;t._keysPressed[e.key]="keydown"===e.type,t._handleKeyStrokes(e.key)}}}}},{key:"_keyUpHandler",value:function(e){var t=this;if(t.filterable&&t.$.filterInput===document.activeElement)return t._filterTimer&&clearTimeout(t._filterTimer),void(t._filterTimer=setTimeout(function(){t._filterItems(),t._scrollView.scrollTop=t.$.itemsContainer.scrollTop=0,t._scrollView.scrollLeft=t.$.itemsContainer.scrollLeft=0},300));if(t._focused){if(t._focusedItem&&t._focusedItem.hidden&&t._filteredItems.length>0){var i=t._filteredItems[0];i.grouped&&t._filteredItems.length>1&&(i=t._filteredItems[1]),t._focus(i),t._recycle()}e.stopPropagation(),e.preventDefault(),t.disabled||["Shift","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Control"," ","PageUp","PageDown"].indexOf(e.key)<0||(t._keysPressed[e.key]=!1)}}},{key:"_mouseWheelHandler",value:function(e){var t=this;t._scrollView.hScrollBar.$.hasClass("jqx-hidden")&&t._scrollView.vScrollBar.$.hasClass("jqx-hidden")||t.disabled||t._scrollView.vScrollBar.$.hasClass("jqx-hidden")||(e.stopPropagation(),e.preventDefault(),t._scrollView.scrollTop+=e.deltaY<0?-100:100)}},{key:"_pageDownKeyHandler",value:function(e){var t=this;if(0!==e.length){var i=t._items[t.selectedIndexes[t.selectedIndexes.length-1]];"checkBox"!==t.selectionMode&&"radioButton"!==t.selectionMode&&"zeroOrMany"!==t.selectionMode&&"oneOrMany"!==t.selectionMode||t._focusedItem&&(i=t._focusedItem);for(var r=void 0,o=t._indexOf(i),l=i.top+t.$.itemsContainer.offsetHeight-i.height,n=o;n<e.length;n++)if(e[n].top>=l){r=e[n];break}r||(r=e[e.length-1]),"checkBox"===t.selectionMode||"radioButton"===t.selectionMode||"zeroOrMany"===t.selectionMode||"oneOrMany"===t.selectionMode?t._focus(r):r.selected||(t._keysPressed.Shift||t.clearSelection(),t.select(r)),(r.height+r.top>t.$.itemsContainer.scrollTop+t.$.itemsContainer.offsetHeight||r.top<t.$.itemsContainer.scrollTop)&&(t._scrollView.scrollTop=r.top-t.$.itemsContainer.offsetHeight+r.height)}}},{key:"_pageUpKeyHandler",value:function(e){var t=this;if(0!==e.length){var i=t._items[t.selectedIndexes[t.selectedIndexes.length-1]];"checkBox"!==t.selectionMode&&"radioButton"!==t.selectionMode&&"zeroOrMany"!==t.selectionMode&&"oneOrMany"!==t.selectionMode||t._focusedItem&&(i=t._focusedItem);for(var r=i.top-t.$.itemsContainer.offsetHeight,o=t._indexOf(i),l=void 0,n=o;n>0;n--)if(e[n].top<=r){l=e[n];break}l||(l=e[0]),"checkBox"===t.selectionMode||"radioButton"===t.selectionMode||"zeroOrMany"===t.selectionMode||"oneOrMany"===t.selectionMode?t._focus(l):l.selected||(t._keysPressed.Shift||t.clearSelection(),t.select(l)),t._scrollView.scrollTop=l.top;0===t._indexOf(l)&&(t._scrollView.scrollTop=0)}}},{key:"clearItems",value:function(){var e=this;e.$.itemsInnerContainer.innerHTML="",e._items=[],e.clearSelection()}},{key:"_resizeHandler",value:function(e){var t=this;e.target!==t||t._isUpdatingScrollBars||(t._isUpdatingScrollBars=!0,t._initializeRecyclingItems(),t._refreshLayout(),t._isUpdatingScrollBars=!1)}},{key:"_indexOf",value:function(e){var t=this;if(!e)return-1;var i=t._items.indexOf(e);return-1===i&&(i=t._items.indexOf(t.getItem(e.value))),i}},{key:"_incrementalSearch",value:function(){var e=this,t="radioButton"!==e.selectionMode&&"checkBox"!==e.selectionMode&&"zeroOrMany"!==e.selectionMode&&"oneOrMany"!==e.selectionMode,i=void 0,r=0;switch(e.incrementalSearchMode){case"containsIgnoreCase":case"equalsIgnoreCase":case"startsWithIgnoreCase":case"endsWithIgnoreCase":i=e._incrementalSearchQuery.toLowerCase();break;default:i=e._incrementalSearchQuery}var o=function(i){i.grouped||(t?(e.selectedIndexes.length>0&&e.clearSelection(),e._focus(i),e.select(i)):e._focus(i),(i.height+i.top>e.$.itemsContainer.scrollTop+e.$.itemsContainer.offsetHeight||i.top<e._scrollView.scrollTop)&&(e._scrollView.scrollTop=i.top),0===e._indexOf(i)&&(e._scrollView.scrollTop=0),e._indexOf(i)===e._items.length-1&&(e._scrollView.scrollTop=e._scrollView.scrollHeight))};0!==e._previousEntry.localeCompare(i)&&(e._incrementalSearchItems=e._queryItems(e._incrementalSearchQuery,e.incrementalSearchMode),delete e._itemPosition),e._previousEntry=i;var l=e._incrementalSearchItems.length;if(0!==l){if(1===l)return void o(e._incrementalSearchItems[0]);for(void 0!==e._itemPosition?e._itemPosition<l-1?r=e._itemPosition:(r=0,t?(e._incrementalSearchItems[e._itemPosition].selected=!1,e.selectedIndexes=[],e.selectedValues=[]):e._incrementalSearchItems[e._itemPosition].focused=!1):t&&e.clearSelection(),r;r<l;r++)if(e._incrementalSearchItems[r].selected&&t)e._incrementalSearchItems[r].selected=!1,e.selectedIndexes=[],e.selectedValues=[];else{if(t||!e._incrementalSearchItems[r].focused)return o(e._incrementalSearchItems[r]),void(e._itemPosition=r);e._incrementalSearchItems[r].focused=!1}}}},{key:"_selectStartHandler",value:function(e){this.$.filterInput!==document.activeElement&&e.preventDefault()}},{key:"_handleArrowKeys",value:function(e){var t=this,i="radioButton"!==t.selectionMode&&"checkBox"!==t.selectionMode&&"zeroOrMany"!==t.selectionMode&&"oneOrMany"!==t.selectionMode;if(!t.disabled&&!t.readonly){var r=void 0;if(t._focusedItem&&!t._keysPressed.Shift)r=t._indexOf(t._focusedItem),t._focusedItem.focused=!1;else{if(0===t.selectedIndexes.length)return;r=t.selectedIndexes[t.selectedIndexes.length-1]}var o=e?t._getPreviousItem(r):t._getNextItem(r);t._focus(o),i&&(t._keysPressed.Shift?t.select(o):t._items[r]!==o&&(t.clearSelection(),t.select(o))),t.ensureVisible(o)}}},{key:"_refreshFilter",value:function(){var e=this;if(e.filterable)return e.$.filterInput.disabled=!(!e.disabled&&!e.displayLoadingIndicator),e.$filterInput.removeClass("jqx-hidden"),void e.$itemsContainer.addClass("filter");e.$.filterInput.disabled=!0,e.$filterInput.addClass("jqx-hidden"),e.$itemsContainer.removeClass("filter")}},{key:"setFocusable",value:function(e){var t=this;if(t.disabled||!e)return void t.removeAttribute("tabindex");t.tabIndex=0}},{key:"_setLoadingIndicatorVisibility",value:function(){var e=this;if(e.displayLoadingIndicator)return void(e.$loadingIndicatorContainer.hasClass("jqx-visibility-hidden")?e.$loadingIndicatorContainer.removeClass("jqx-visibility-hidden"):e.$loadingIndicatorContainer.removeClass("jqx-hidden"));e._areCSSVarsSupported?e.$loadingIndicatorContainer.addClass("jqx-hidden"):e.$loadingIndicatorContainer.addClass("jqx-visibility-hidden")}},{key:"_refreshLayout",value:function(){var e=this,t=e._items;if(e.__scrollHeight=null,e.__scrollWidth=null,!t||null===t||0===t.length)return e._scrollView.hScrollBar.$.addClass("jqx-hidden"),e._scrollView.vScrollBar.$.addClass("jqx-hidden"),e.$itemsContainer.removeClass("hscroll"),e.$itemsContainer.removeClass("vscroll"),e.$filterInput.removeClass("vscroll"),e.$placeholder.removeClass("jqx-hidden"),void(e.isVirtualized&&e._recycle());e.$placeholder.addClass("jqx-hidden");var i=e._scrollWidth-e.$.itemsContainer.offsetWidth,r=e._scrollHeight;if(e._refreshHorizontalScrollBarVisibility(i),e._refreshVerticalScrollBarVisibility(r),!e._scrollView.vScrollBar.$.hasClass("jqx-hidden"))return i=e._scrollWidth-e.$.itemsContainer.offsetWidth,e._refreshHorizontalScrollBarVisibility(i),e._scrollView.hScrollBar.$.hasClass("jqx-hidden")?(e._scrollView.vScrollBar.$.removeClass("bottom-right-visible"),e._scrollView.hScrollBar.$.removeClass("bottom-right-visible")):(e._scrollView.hScrollBar.$.addClass("bottom-right-visible"),e._scrollView.vScrollBar.$.addClass("bottom-right-visible"),e.__scrollHeight+=e._scrollView.hScrollBar.offsetHeight,e._scrollView.scrollHeight=e.__scrollHeight),void(e.isVirtualized&&e._recycle());i=e._scrollWidth-e.$.itemsContainer.offsetWidth,e._refreshHorizontalScrollBarVisibility(i),e._scrollView.hScrollBar.$.hasClass("jqx-hidden")||(e._scrollView.scrollHeight=e._scrollHeight,e._refreshVerticalScrollBarVisibility(r),e._scrollView.vScrollBar.$.hasClass("jqx-hidden")?(e._scrollView.vScrollBar.$.removeClass("bottom-right-visible"),e._scrollView.hScrollBar.$.removeClass("bottom-right-visible")):(e._scrollView.hScrollBar.$.addClass("bottom-right-visible"),e._scrollView.vScrollBar.$.addClass("bottom-right-visible"))),e.isVirtualized&&e._recycle()}},{key:"_styleChangedHandler",value:function(){this._refreshLayout()}},{key:"_swipeLeftHandler",value:function(){}},{key:"_swipeRightHandler",value:function(){}},{key:"_refreshHorizontalScrollBarVisibility",value:function(e){var t=this;t._scrollView.scrollWidth=e,e>0?(t._scrollView.scrollLeft=t.$.itemsContainer.scrollLeft,t.$itemsContainer.addClass("hscroll"),t._scrollView.hScrollBar.$.removeClass("jqx-hidden")):(t._scrollView.hScrollBar.$.addClass("jqx-hidden"),t.$itemsContainer.removeClass("hscroll"))}},{key:"_refreshVerticalScrollBarVisibility",value:function(e){var t=this;t._scrollView.scrollHeight=e,e>0?(t._scrollView.vScrollBar.$.removeClass("jqx-hidden"),t.$itemsContainer.addClass("vscroll"),t.$filterInput.addClass("vscroll")):(t._scrollView.vScrollBar.$.addClass("jqx-hidden"),t.$itemsContainer.removeClass("vscroll"),t.$filterInput.removeClass("vscroll"))}},{key:"_validateTemplate",value:function(e,t){if(null!==t&&t){var i=this;return"content"in document.createElement("template")?(t=document.getElementById(t),null!==t&&"content"in t?t:(i.error(i.localize("invalidTemplate",{elementType:i.nodeName.toLowerCase(),property:e})),void(i[e]=null))):(i.error(i.localize("htmlTemplateNotSuported",{elementType:i.nodeName.toLowerCase()})),void(i[e]=null))}}},{key:"_getItemIndexByPosition",value:function(e){var t=this,i=t.filterable&&t.$.filterInput.value.length>0?t._filteredItems:t._items;return function(i){var r=0,o=i.length-1;if(e<=0)return 0;if(i[i.length-1].top<=e)return i.length-1;for(;;){var l=Math.floor((r+o)/2),n=i[l];if(t._isItemInPosition(n,e))return l;n.top<e?r=l+1:n.top>e&&(o=l-1)}}(i)}},{key:"_isItemInPosition",value:function(e,t){var i=e.top,r=e.top+e.height;return i<=t&&r>t}},{key:"_recycle",value:function(){var e=this;if(e._recyclingItems){var t=e._height;e._height||(t=e._height=e.$.itemsContainer.offsetHeight);var i=0,r=e._scrollView.scrollTop,o=e._getItemIndexByPosition(r),l=e.filterable&&e.$.filterInput.value.length>0?e._filteredItems:e._items,n=l[o],a=n?n.top:0;if(e.$.itemsInnerContainer.style.left=-e._scrollView.scrollLeft+"px",e.$.itemsInnerContainer.style.top=-r+a+"px",e.isUpdating++,o>=0)for(var s=o;s<l.length;s++){var d=l[s];if(0!==d.height){if(!(a+d.height>=r&&a<=r+t))break;var c=e._recyclingItems[i++];c.dataItem=d,c.label=d.label,c.value=d.value,c.selected=d.selected,c.focused=d.focused,c.hidden=d.hidden,c.grouped=d.grouped,d.title?c.title=d.title:c.title="",d.grouped?c.displayMode="default":c.displayMode=d.displayMode,e._scrollView.scrollWidth>0&&(c.style.width=e.$.itemsInnerContainer.offsetWidth+e._scrollView.scrollWidth+"px"),e.itemTemplate&&e._handleItemTemplate(e.itemTemplate)&&e._applyTemplate(c,!1),a+=d.height}}if(i<e._recyclingItems.length)for(var p=i;p<e._recyclingItems.length;p++){var u=e._recyclingItems[i++];u.hidden=!0}e.isUpdating--}}},{key:"_verticalScrollbarHandler",value:function(e){var t=this,i=e.detail.value;if(e.stopPropagation(),t.isVirtualized?t._recycle():t.$.itemsContainer.scrollTop=i,e.context.max===e.context.value)return void t.$.fireEvent("scrollBottomReached");e.context.min===e.context.value&&t.$.fireEvent("scrollTopReached")}},{key:"items",get:function(){var e=this;return e._filteredItems?e._filteredItems:e._items}},{key:"_scrollHeight",get:function(){var e=this,t=0;if(e.isVirtualized){if(e.__scrollHeight)return e.__scrollHeight;if(0===e._items.length)return 0;e.isUpdating++;var i=e._createItem(e.dataSource[0]);e.$.itemsInnerContainer.appendChild(i);for(var r=0;r<e._items.length;r++){var o=e._items[r];o.hidden?(o.height=0,o.top=t):(e.itemHeight?(e.itemHeight<30&&(e.itemHeight=30),o.height=e.itemHeight):(i.label=o.label,o.height=i.offsetHeight),o.top=t,t+=o.height)}e.$.itemsInnerContainer.removeChild(i),e.__scrollHeight=t-e.offsetHeight,e.filterable&&(e.__scrollHeight+=e.$.filterInput.offsetHeight),t=e.__scrollHeight,e.isUpdating--}else{for(var l=0;l<e._items.length;l++){var n=e._items[l];n.hidden?(n.height=0,n.top=t):(e.itemHeight?"auto"!==e.itemHeight&&(n.height=e.itemHeight,n.style.height=n.height+"px"):n.height=n.offsetHeight,n.top=n.offsetTop,t+=n.height)}t=e.$.itemsInnerContainer.scrollHeight-e.$.itemsInnerContainer.offsetHeight}return t}},{key:"_scrollWidth",get:function(){var e=this,t=this,i=t._items;return t.__scrollWidth?t.__scrollWidth:(t.__scrollWidth=function(){var t=e,r=void 0;if(t.isVirtualized){for(var o="",l=0;l<i.length;l++){var n=i[l].label;n.length>o.length&&(o=n)}var a=t._createItem(t.dataSource[0]);return t.$.itemsInnerContainer.appendChild(a),a.label=o,t._areCSSVarsSupported?(t.$.container.setAttribute("style","--jqx-list-item-inner-container-width: 'auto'"),r=a.offsetWidth,t.$.container.setAttribute("style","--jqx-list-item-inner-container-width: 100%")):(t.$.itemsInnerContainer.style.width="0px",r=a.offsetWidth,t.$.itemsInnerContainer.style.width="100%"),a.parentNode.removeChild(a),r}if(t._areCSSVarsSupported){t.$.container.setAttribute("style","--jqx-list-item-inner-container-width: 'auto'"),r=i[0].offsetWidth;for(var s=1;s<i.length;s++)r=Math.max(r,i[s].offsetWidth);if(t._groups)for(var d=0;d<t._groups.length;d++)r=Math.max(r,t._groups[d].offsetWidth);t.$.container.setAttribute("style","--jqx-list-item-inner-container-width: 100%")}else{t.$.itemsInnerContainer.style.width="0px",r=i[0].offsetWidth;for(var c=1;c<i.length;c++)r=Math.max(r,i[c].offsetWidth);if(t._groups)for(var p=0;p<t._groups.length;p++)r=Math.max(r,t._groups[p].offsetWidth);t.$.itemsInnerContainer.style.width="100%"}return r}(),t.__scrollWidth>t.$.itemsContainer.offsetWidth?(t._areCSSVarsSupported?t.$.container.setAttribute("style","--jqx-list-item-inner-container-width: "+t.__scrollWidth+"px"):t.$.itemsInnerContainer.style.width=t.__scrollWidth+"px",t.__scrollWidth):(t._areCSSVarsSupported?t.$.container.setAttribute("style","--jqx-list-item-inner-container-width: 100%"):t.$.itemsInnerContainer.style.width="100%",t.__scrollWidth))}},{key:"isVirtualized",get:function(){var e=this;return e.virtualized&&e.dataSource&&e.dataSource.length>0}}],[{key:"properties",get:function(){return{dataSource:{value:null,type:"object",reflectToAttribute:!1},displayLoadingIndicator:{value:!1,type:"boolean"},displayMember:{value:"",type:"string"},dropAction:{value:"move",type:"string",allowedValues:["copy","move","none"]},filterable:{value:!1,type:"boolean"},filterMode:{value:"startsWithIgnoreCase",allowedValues:["none","contains","containsIgnoreCase","equals","equalsIgnoreCase","startsWith","startsWithIgnoreCase","endsWith","endsWithIgnoreCase"],type:"string"},filterInputPlaceholder:{value:"",type:"string"},grouped:{value:!1,type:"boolean"},groupMember:{value:"",type:"string"},itemTemplate:{value:null,type:"string?"},itemHeight:{value:null,type:"number?"},incrementalSearchDelay:{value:700,type:"number?"},incrementalSearchMode:{value:"startsWithIgnoreCase",allowedValues:["none","contains","containsIgnoreCase","equals","equalsIgnoreCase","startsWith","startsWithIgnoreCase","endsWith","endsWithIgnoreCase"],type:"string"},loadingIndicatorPlaceholder:{value:"Loading...",type:"string"},loadingIndicatorPosition:{value:"center",allowedValues:["bottom","center","top"],type:"string"},messages:{extend:!0,value:{en:{missingReference:"{{elementType}}: Missing reference to {{files}}.",overridingProperties:'{{elementType}}: Overriding properties {{property1}} and {{property2}} applied. The "{{property1}}" property is used by default.',invalidIndex:'{{elementType}}: "{{method}}" method accepts an index of type number or an Array of numbers.',indexOutOfBound:'{{elementType}}: Out of bound index/indexes in "{{method}}" method.',invalidItem:'{{elementType}}: "{{method}}" method accepts an object or an array of objects as it\'s second parameter.',invalidSettings:'{{elementType}}: "{{method}}" method accepts a string or an object as it\'s second parameter.',htmlTemplateNotSuported:"{{elementType}}: Browser doesn't support HTMLTemplate elements.",invalidTemplate:'{{elementType}}: "{{property}}" property accepts a string that must match the id of an HTMLTemplate element from the DOM.'}},type:"object"},placeholder:{value:"No Items",type:"string"},reorder:{value:!1,type:"boolean"},readonly:{value:!1,type:"boolean"},selectedIndexes:{value:[],type:"array"},selectedValues:{value:[],type:"array"},selectionMode:{value:"default",allowedValues:["none","default","zeroOrMany","oneOrMany","zeroOrOne","one","checkBox","radioButton"],type:"string"},sorted:{value:!1,type:"boolean"},valueMember:{value:"",type:"string"},virtualized:{value:!1,type:"boolean"}}}},{key:"listeners",get:function(){return{focus:"_focusHandler",blur:"_blurHandler","container.wheel":"_mouseWheelHandler","horizontalScrollBar.change":"_horizontalScrollbarHandler","itemsInnerContainer.down":"_downHandler","itemsInnerContainer.move":"_itemsContainerMoveHandler","document.up":"_upHandler","document.move":"_moveHandler",keydown:"_keyDownHandler",keyup:"_keyUpHandler",resize:"_resizeHandler",selectstart:"_selectStartHandler",styleChanged:"_styleChangedHandler",swipeleft:"_swipeLeftHandler",swiperight:"_swipeRightHandler","verticalScrollBar.change":"_verticalScrollbarHandler"}}}]),t}(JQX.ContentElement));
//# sourceMappingURL=jqxlistbox.js.map
