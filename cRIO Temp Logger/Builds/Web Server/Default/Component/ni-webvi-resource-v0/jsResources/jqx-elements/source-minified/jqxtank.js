"use strict";function _classCallCheck(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,a){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!=typeof a&&"function"!=typeof a?e:a}function _inherits(e,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);e.prototype=Object.create(a&&a.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(e,a):e.__proto__=a)}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_createClass=function(){function e(e,a){for(var t=0;t<a.length;t++){var i=a[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(a,t,i){return t&&e(a.prototype,t),i&&e(a,i),a}}(),_get=function e(a,t,i){null===a&&(a=Function.prototype);var r=Object.getOwnPropertyDescriptor(a,t);if(void 0===r){var n=Object.getPrototypeOf(a);return null===n?void 0:e(n,t,i)}if("value"in r)return r.value;var o=r.get;return void 0===o?void 0:o.call(i)};JQX("jqx-tank",function(e){function a(){return _classCallCheck(this,a),_possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return _inherits(a,e),_createClass(a,[{key:"template",value:function t(){var t='<div id="container" class="jqx-container"><div id="scaleNear" class="jqx-scale jqx-scale-near"></div><div id="track" class="jqx-track"><div id="fill" class="jqx-value"><div id="tooltip" class="jqx-tooltip"><div id="tooltipContent" class="jqx-tooltip-content jqx-unselectable"></div></div></div><div id="thumb" class="jqx-thumb"></div><div id="trackTicksContainer" class="jqx-track-ticks-container jqx-hidden"></div></div><div id="scaleFar" class="jqx-scale jqx-scale-far"></div></div>';return t}},{key:"ready",value:function(){_get(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"ready",this).call(this),this._createElement()}},{key:"_createElement",value:function(){var e=this;e._checkMissingModules(),e._setSettingsObject(),e._setDrawVariables(),e._getLayoutType(),e._numericProcessor=new JQX.Utilities.NumericProcessor(e,"scaleType"),e._numberRenderer=new JQX.Utilities.NumberRenderer,e._setInitialComponentDisplay(),e._measurements={},e._validateInitialPropertyValues(),e._setTicksAndInterval(),e._numericProcessor.validateInterval(e.interval),e._validate(!0),e._updateTooltipValue(e._drawValue),e._setTabIndex(),e._setTrackSize()}},{key:"val",value:function(e){var a=this,t="object"===("undefined"==typeof e?"undefined":_typeof(e))&&0===Object.keys(e).length;if(void 0===e||t!==!1)return a.value;if(e=e.toString().replace(/\s/g,""),a._numericProcessor.regexScientificNotation.test(e)&&(e=a._numericProcessor.scientificToDecimal(e)),e=a.logarithmicScale?a._formatNumber(Math.pow(10,a._numericProcessor.getCoercedValue(Math.log10(e)))):a._numericProcessor.getCoercedValue(e),parseFloat(a.value)!==parseFloat(e)){var i=e.toString();a._validate(!1,i,!0),a._programmaticValueIsSet=!0,a.value=a._discardDecimalSeparator(i),delete a._valueBeforeCoercion}}},{key:"_setTrackSize",value:function(){var e=this;"vertical"===e.orientation?e._trackSize=e.$.track.offsetWidth:e._trackSize=e.$.track.offsetHeight}},{key:"getOptimalSize",value:function(){function e(e,a){var t=e.getElementsByClassName("jqx-label");l=t[0],s=t[t.length-1];var i=window.getComputedStyle(t[0])[a];n+=parseFloat(i)}function a(a){var v=t._trackSize+parseFloat(r[a.marginA])+parseFloat(r[a.marginB]);switch(n=v,t.scalePosition){case"none":return n+=parseFloat(i[a.paddingA])+parseFloat(i[a.paddingB]),o="undefined"!=typeof t._tankSizeBeforeOrientation?"horizontal"===t.orientation?t._tankSizeBeforeOrientation.height:t._tankSizeBeforeOrientation.width:"horizontal"===t.orientation?parseFloat(r.width):parseFloat(r.height),void(t._trackChanged!==!0&&(t._trackChanged=!0));case"near":n+=m,e(t.$.scaleNear,a.nearScaleDistance);break;case"far":n+=m,e(t.$.scaleFar,a.farScaleDistance);break;case"both":n+=2*m,e(t.$.scaleNear,a.nearScaleDistance),e(t.$.scaleFar,a.farScaleDistance)}n+=parseFloat(i[a.paddingA])+parseFloat(i[a.paddingB]),c=l.getBoundingClientRect(),d=s.getBoundingClientRect(),o=t[a.offset],u=c[a.distance]+l[a.offset]-d[a.distance],u>0&&(o=l[a.offset]+s[a.offset])}var t=this,i=window.getComputedStyle(t),r=window.getComputedStyle(t.$.track),n=void 0,o=void 0,l=void 0,s=void 0,c=void 0,d=void 0,u=void 0,v=void 0,m=void 0;switch(t.labelsVisibility){case"all":m=t._numericProcessor._longestLabelSize;break;case"endPoints":m=Math.max(t._tickIntervalHandler.labelsSize.minLabelOtherSize,t._tickIntervalHandler.labelsSize.maxLabelOtherSize);break;case"none":m=0}switch(t.orientation){case"horizontal":return v={marginA:"marginBottom",marginB:"marginTop",nearScaleDistance:"bottom",farScaleDistance:"top",paddingA:"paddingBottom",paddingB:"paddingTop",offset:"offsetWidth",distance:"left"},t._orientationChanged&&(v.offset="offsetHeight",t._trackChanged=!0),a(v),{width:o,height:n};case"vertical":return v={marginA:"marginLeft",marginB:"marginRight",nearScaleDistance:"right",farScaleDistance:"left",paddingA:"paddingLeft",paddingB:"paddingRight",offset:"offsetHeight",distance:"top"},t._orientationChanged&&(v.offset="offsetWidth",t._trackChanged=!0),a(v),{width:n,height:o}}}},{key:"propertyChangedHandler",value:function(e,t,i){_get(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"propertyChangedHandler",this).call(this,e,t,i);var r=this;switch(e){case"labelsVisibility":case"ticksVisibility":return void r._updateScaleWidth(r._numericProcessor._longestLabelSize);case"coerce":if(i){var n=r.value;r.val(n),r.logarithmicScale?r._moveThumbBasedOnValue(r._drawValue):r._moveThumbBasedOnValue(r.value),r._valueBeforeCoercion=n}else void 0!==r._valueBeforeCoercion&&r.val(r._valueBeforeCoercion);return;case"interval":r._numericProcessor.validateInterval(i),r.val(r.value);break;case"min":case"max":r._validateMinMax(e,!1,t);var o=r._numericProcessor.createDescriptor(r._discardDecimalSeparator(r.value,r.decimalSeparator)),l=r._validateRange(o);r._setTicksAndInterval(),r._numericProcessor.updateValue(l);break;case"inverted":r._getLayoutType(),r._normalLayout&&(r.$.fill.style[r._settings.margin]="0px");var s=r._numericProcessor.createDescriptor(r.value),c=r._validateRange(s);r._setTicksAndInterval(),r._numericProcessor.updateValue(c);break;case"orientation":var d=r.$.fill.style,u=r.$.container.style;switch(r._orientationChanged!==!0&&(r._orientationChanged=!0),r._tankSizeBeforeOrientation={width:r.offsetWidth,height:r.offsetHeight},r._setSettingsObject(),r._getLayoutType(),r.inverted&&(d.marginTop="0",d.marginLeft="0"),r.orientation){case"vertical":r.inverted||(d.marginTop="auto",d.marginLeft="0"),d.width="100%",u.paddingLeft="0",u.paddingRight="0";break;case"horizontal":r.inverted||(d.marginTop="0",d.marginLeft="auto"),d.height="100%",u.paddingTop="0",u.paddingBottom="0"}r._validateMinMax("both");var v=r._numericProcessor.createDescriptor(r.value),m=r._validateRange(v);r._setTicksAndInterval(),r._setTicksAndInterval(),r._numericProcessor.updateValue(m);break;case"significantDigits":case"precisionDigits":if("precisionDigits"===e&&"integer"===r.scaleType&&r.error(r.localize("noInteger",{elementType:r.nodeName.toLowerCase(),property:e})),"significantDigits"===e&&null!==r.precisionDigits?r.precisionDigits=null:"precisionDigits"===e&&null!==r.significantDigits&&(r.significantDigits=null),r._validateInitialPropertyValues(),r._setTicksAndInterval(),"horizontal"===r.orientation&&r.inverted){var g=r._numericProcessor.valueToPx(r._numericProcessor.getCoercedValue(r._drawValue));r.updateFillSizeAndPosition(g,r._settings.margin,i,!1)}break;case"decimalSeparator":if("integer"===r.scaleType)return;var _=r._discardDecimalSeparator(r.value,t),p=r._applyDecimalSeparator(_);r.value=_,delete r._valueBeforeCoercion,r._numericProcessor.addTicksAndLabels(),r._updateTooltipValue(p);break;case"value":if(null===i)return;var h=void 0!==i?i.toString().replace(/\s/g,""):t.toString().replace(/\s/g,"");r._numericProcessor.regexScientificNotation.test(h)&&(h=r._numericProcessor.scientificToDecimal(h)),r._validate(!1,h),r._programmaticValueIsSet=!0,r.value=h.toString(),delete r._valueBeforeCoercion;break;case"scaleType":r._changeScaleType(t,i);break;case"disabled":case"readonly":r._setTabIndex();break;case"showUnit":case"unit":r._setTicksAndInterval(),r._moveThumbBasedOnValue(r._drawValue);break;case"tooltipPosition":break;case"wordLength":r._validateMinMax("both");var f=r._numericProcessor.createDescriptor(r.value),y=r._validateRange(f);r._setTicksAndInterval(),r._numericProcessor.updateValue(y);break;case"scalePosition":r._setInitialComponentDisplay(),r._setTicksAndInterval(),r._numericProcessor.updateValue(r.value);break;case"scientificNotation":var k=r._discardDecimalSeparator(r.value,r.decimalSeparator);r._setTicksAndInterval(),r._updateTooltipValue(k);break;case"logarithmicScale":r._validateMinMax("both");var b=r._numericProcessor.createDescriptor(r.value),w=r._validateRange(b);r._setTicksAndInterval(),r._numericProcessor.updateValue(w);break;case"ticksPosition":"scale"===i?(r.$trackTicksContainer.addClass("jqx-hidden"),r.$.trackTicksContainer.innerHTML=""):r.$trackTicksContainer.removeClass("jqx-hidden"),r._numericProcessor.addTicksAndLabels()}}},{key:"_checkMissingModules",value:function(){var e=[];try{BigNumber}catch(a){e.push("jqxmath.js")}if(void 0===JQX.Utilities.NumberRenderer&&e.push("jqxnumberrenderer.js"),void 0===JQX.Utilities.NumericProcessor&&e.push("jqxnumericprocessor.js"),void 0===JQX.Utilities.TickIntervalHandler&&e.push("jqxtickintervalhandler.js"),e.length>0){var t=this;t.error(t.localize("missingReference",{elementType:t.nodeName.toLowerCase(),files:e.join(", ")}))}}},{key:"_setSettingsObject",value:function(){var e=this;"horizontal"===e.orientation?e._settings={clientSize:"clientWidth",dimension:"width",leftOrTop:"left",margin:"marginLeft",offset:"offsetLeft",otherSize:"offsetHeight",size:"offsetWidth",page:"pageX"}:e._settings={clientSize:"clientHeight",dimension:"height",leftOrTop:"top",margin:"marginTop",offset:"offsetTop",otherSize:"offsetWidth",size:"offsetHeight",page:"pageY"}}},{key:"_setInitialComponentDisplay",value:function(){var e=this;switch(e.scalePosition){case"near":e.$scaleNear.removeClass("jqx-hidden"),e.$scaleFar.addClass("jqx-hidden");break;case"far":e.$scaleNear.addClass("jqx-hidden"),e.$scaleFar.removeClass("jqx-hidden");break;case"both":e.$scaleFar.removeClass("jqx-hidden"),e.$scaleNear.removeClass("jqx-hidden");break;case"none":e.$scaleFar.addClass("jqx-hidden"),e.$scaleNear.addClass("jqx-hidden")}e.$tooltip.addClass("jqx-hidden"),"track"===e.ticksPosition&&e.$trackTicksContainer.removeClass("jqx-hidden")}},{key:"_validateInitialPropertyValues",value:function(){var e=this,a=_typeof(e.value)===String?e.value.replace(/\s/g,""):e.value.toString().replace(/\s/g,"");e._numericProcessor.regexScientificNotation.test(a)&&(e.value=e._numericProcessor.scientificToDecimal(a),delete e._valueBeforeCoercion),e.significantDigits=null!==e.significantDigits?Math.min(Math.max(e.significantDigits,1),21):null,null===e.significantDigits&&null===e.precisionDigits?e.significantDigits=8:null!==e.significantDigits&&null!==e.precisionDigits&&e.error(e.localize("significantPrecisionDigits",{elementType:e.nodeName.toLowerCase()})),e._validateMinMax("both",!0)}},{key:"_validateMinMax",value:function(e,a,t){function i(e,t){r._numericProcessor.validateMinMax("min"===e||a,"max"===e||a);var i=r["_"+e+"Object"],l="min"===e?new BigNumber(r.max).compare(i)<=0:new BigNumber(r.min).compare(i)>0;l?t?(r._numberRenderer=new JQX.Utilities.NumberRenderer(t),"min"===e?n=!1:o=!1,r[e]=t,r["_"+e+"Object"]=t):r.error(r.localize("invalidMinOrMax",{elementType:r.nodeName.toLowerCase(),property:e})):(r._numberRenderer=new JQX.Utilities.NumberRenderer(i),r[e]=r["_"+e+"Object"])}var r=this,n="min"===e||"both"===e,o="max"===e||"both"===e;void 0===("undefined"==typeof a?"undefined":_typeof(a))&&(a=!1),"both"===e?(i("min",t),i("max",t)):i(e,t),r.logarithmicScale?r._validateOnLogarithmicScale(n,o,t):(r._drawMin=r.min,r._drawMax=r.max),r.min=r.min.toString(),r.max=r.max.toString()}},{key:"_calculateTickInterval",value:function(){var e=this,a=e._tickIntervalHandler.getInterval("linear",e._drawMin,e._drawMax,e.$.track,e.logarithmicScale);a.major!==e._majorTicksInterval?(e._intervalHasChanged=!0,e._majorTicksInterval=a.major):e._intervalHasChanged=!0,e._minorTicksInterval=a.minor}},{key:"_formatNumber",value:function(e){var a=this,t=a._numberRenderer,i=parseFloat(e);if(t.numericValue=e,a.scientificNotation)i=a._numberRenderer.toScientific();else switch(a.scaleType){case"floatingPoint":i=a._applyDecimalSeparator(t.toDigits(a.significantDigits,a.precisionDigits));break;case"integer":i=t.isENotation(i)?Math.round(t.largeExponentialToDecimal(i)):Math.round(i),i=t.toDigits(a.significantDigits,0)}return i}},{key:"_formatLabel",value:function(e){var a=this,t=void 0;return t=a._formatNumber(e),a._numberRenderer=new JQX.Utilities.NumberRenderer(t),a.showUnit&&(t+=' <span class="jqx-unselectable">'+a.unit+"</span>"),t}},{key:"_layout",value:function(){var e=this,a=e.$.container.style,t=e._tickIntervalHandler.labelsSize.minLabelSize/2+"px",i=e._tickIntervalHandler.labelsSize.maxLabelSize/2+"px";switch(e.orientation){case"horizontal":if("none"===e.scalePosition){a.paddingLeft="",a.paddingRight="";break}e.inverted?(a.paddingLeft=i,a.paddingRight=t):(a.paddingLeft=t,a.paddingRight=i);break;case"vertical":if("none"===e.scalePosition){a.paddingTop="",a.paddingBottom="";break}e.inverted?(a.paddingBottom=i,a.paddingTop=t):(a.paddingBottom=t,a.paddingTop=i)}e._measurements.trackLength=e.$.track[this._settings.clientSize]}},{key:"_trackDownHandler",value:function(e){var a=this;a.disabled||a.readonly||("switchUntilReleased"===a.mechanicalAction&&(a._cachedValue={},a._cachedValue._drawValue=a._drawValue,a._cachedValue.value=a.value),a._getTrackStartAndEnd(),a._moveThumbBasedOnCoordinates(e,!0,"switchWhenReleased"!==a.mechanicalAction),a._thumbDragged=!0,a.$track.addClass("jqx-dragged"),a.showTooltip&&a.$tooltip.removeClass("jqx-hidden"))}},{key:"_documentMoveHandler",value:function(e){var a=this;a._thumbDragged&&a._moveThumbBasedOnCoordinates(e,!0,"switchWhenReleased"!==a.mechanicalAction)}},{key:"_documentUpHandler",value:function(e){var a=this;if(a._thumbDragged){if("switchWhenReleased"===a.mechanicalAction)a._moveThumbBasedOnCoordinates(e,!0,!0);else if("switchUntilReleased"===a.mechanicalAction){var t=a.value;a._drawValue=a._cachedValue._drawValue,a.value=a._cachedValue.value,a._moveThumbBasedOnValue(a._drawValue),a.$.fireEvent("change",{value:a.value,oldValue:t})}a.showTooltip&&a.$tooltip.addClass("jqx-hidden"),a._thumbDragged=!1,a.$track.removeClass("jqx-dragged")}}},{key:"_selectStartHandler",value:function(e){var a=this;a._thumbDragged&&e.preventDefault()}},{key:"_resizeHandler",value:function(){var e=this;e._orientationChanged!==!0&&(e._setTicksAndInterval(),e._moveThumbBasedOnValue(e._drawValue)),e._trackChanged&&(e._measurements.trackLength=e.$.track[this._settings.clientSize],e._numericProcessor.addTicksAndLabels(),e._moveThumbBasedOnValue(e._drawValue)),e._setTrackSize(),delete e._orientationChanged,delete e._trackChanged}},{key:"_moveThumbBasedOnCoordinates",value:function(e,a,t){var i=this,r=a?Math.min(Math.max(e[i._settings.page],i._trackStart),i._trackEnd):e[i._settings.page],n=i._numericProcessor.pxToValue(r);n=i.logarithmicScale?i._numericProcessor.getCoercedValue(Math.log10(n)):i._numericProcessor.getCoercedValue(n),r=Math.min(Math.max(i._numericProcessor.valueToPx(n)+i._trackStart,i._trackStart),i._trackEnd);var o=r-i._trackStart;i.updateFillSizeAndPosition(o,i._settings.margin,n,!0,t)}},{key:"_moveThumbBasedOnValue",value:function(e){var a=this,t=a._numericProcessor.valueToPx(a._numericProcessor.getCoercedValue(e));a.updateFillSizeAndPosition(t,a._settings.margin,e,!0)}},{key:"updateFillSizeAndPosition",value:function(e,a,t,i,r){var n=this,o=n.$.fill.style;if(n._normalLayout?o[n._settings.dimension]=e+"px":(o[n._settings.dimension]=Math.min(n._measurements.trackLength,Math.max(0,n._measurements.trackLength-e))+"px",o[a]=e+"px"),i){var l=n.value;delete n._valueBeforeCoercion,n._numericProcessor.updateToolTipAndValue(t,l,r)}}},{key:"_updateTooltipValue",value:function(e){var a=this;a.logarithmicScale&&(e=Math.pow(10,e)),e=void 0!==e?a._formatLabel(e):a.value,a.$.tooltipContent.innerHTML=e}},{key:"_getRange",value:function(){var e=this;e.logarithmicScale&&(e._range=e._drawMax-e._drawMin),e._range=new BigNumber(e._drawMax).subtract(new BigNumber(e._drawMin)).toString()}},{key:"_getTrackStartAndEnd",value:function(){var e=this,a=void 0,t=e.$.track.getBoundingClientRect();a="horizontal"===e.orientation?t.left+document.body.scrollLeft:t.top+document.body.scrollTop;var i=a+e._measurements.trackLength,r=i-a;e._trackStart=a,e._trackEnd=i,e._valuePerPx=e._numericProcessor.getValuePerPx(e._range,r)}},{key:"_updateScaleWidth",value:function(e){var a=this,t="track"===a.ticksPosition?4:12;switch(a.labelsVisibility){case"all":e=a._numericProcessor._longestLabelSize;break;case"endPoints":e=Math.max(a._tickIntervalHandler.labelsSize.minLabelOtherSize,a._tickIntervalHandler.labelsSize.maxLabelOtherSize);break;case"none":e=0}var i=t+e,r=Boolean(window.getComputedStyle(a.$.track).getPropertyValue("--jqx-tank-scale-size"));if(r)a.$.container.style.setProperty("--jqx-tank-scale-size",i+"px");else{var n=window.getComputedStyle(a),o=a.$.scaleNear.style,l=a.$.scaleFar.style,s=a.$.track.style,c=void 0,d=void 0,u=void 0,v=void 0;switch(a.orientation){case"horizontal":c="height",d="width",u=a.offsetHeight,v=parseFloat(n.getPropertyValue("padding-top"))+parseFloat(n.getPropertyValue("padding-bottom"));break;case"vertical":c="width",d="height",u=a.offsetWidth,v=parseFloat(n.getPropertyValue("padding-left"))+parseFloat(n.getPropertyValue("padding-right"))}switch(a.scalePosition){case"near":o.setProperty(c,i+"px"),s.setProperty(c,u-v-i-4+"px");break;case"far":l.setProperty(c,i+"px"),s.setProperty(c,u-v-i-4+"px");break;case"both":o.setProperty(c,i+"px"),l.setProperty(c,i+"px"),s.setProperty(c,u-v-2*i-4+"px");break;case"none":s.setProperty(c,"")}s.setProperty(d,"100%"),o.setProperty(d,"100%"),l.setProperty(d,"100%")}}},{key:"_appendTicksAndLabelsToScales",value:function(e,a){function t(t){t.innerHTML=a,"scale"===i.ticksPosition&&(t.innerHTML+=e)}var i=this;switch(i.scalePosition){case"near":t(i.$.scaleNear);break;case"far":t(i.$.scaleFar);break;case"both":t(i.$.scaleNear),t(i.$.scaleFar)}"track"===i.ticksPosition&&(i.$.trackTicksContainer.innerHTML=e)}},{key:"_discardDecimalSeparator",value:function(e,a){var t=this;if(void 0===a&&(a=t.decimalSeparator),"."!==a){var i=new RegExp(a,"g");return"string"==typeof e?e.replace(i,"."):e.toString().replace(i,".")}return e}},{key:"_applyDecimalSeparator",value:function(e){var a=this;return"string"!=typeof e&&(e=e.toString()),"."!==a.decimalSeparator&&(e=e.replace(/\./g,a.decimalSeparator)),e}},{key:"_validate",value:function(e,a,t){var i=this,r=void 0;r=e?i.value:a;var n=i._numericProcessor.createDescriptor(r,!0,!0,!0);t!==!0&&(n=i.logarithmicScale?i._formatNumber(Math.pow(10,i._numericProcessor.getCoercedValue(Math.log10(n)))):i._numericProcessor.getCoercedValue(n)),i._numericProcessor.regexScientificNotation.test(n)&&(n=i._numericProcessor.scientificToDecimal(n)),n=i._discardDecimalSeparator(n,i.decimalSeparator),e?(i._number=n,i._drawValue=i.logarithmicScale?Math.log10(n):n,i.value=n.toString(),delete i._valueBeforeCoercion,i._moveThumbBasedOnValue(i._drawValue),i._programmaticValueIsSet=!1):i._numericProcessor.updateValue(n)}},{key:"_validateRange",value:function(e){var a=this;return e=a._numericProcessor.validate(e,a._minObject,a._maxObject)}},{key:"_changeScaleType",value:function(){var e=this;e._numericProcessor=new JQX.Utilities.NumericProcessor(e,"scaleType"),e._numericProcessor.validateInterval(e.interval),e._validateMinMax("both"),e._setTicksAndInterval(),e._scaleTypeChangedFlag=!0,e._validate(!0,e._number.toString()),e._scaleTypeChangedFlag=!1}},{key:"_setTicksAndInterval",value:function(){var e=this,a=e._formatLabel(e.min),t=e._formatLabel(e.max);e._getRange(),e._tickIntervalHandler=new JQX.Utilities.TickIntervalHandler(e,a,t,"jqx-label",e._settings.size,"integer"===e.scaleType,e.logarithmicScale),e._layout(),e._calculateTickInterval(),e._numericProcessor.addTicksAndLabels()}},{key:"_setTabIndex",value:function(){var e=this;return e.disabled||e.readonly?void e.removeAttribute("tabindex"):void(-1===e.tabIndex&&(e.tabIndex=0))}},{key:"_keyIncrementDecrement",value:function(e){var a=this,t=a.logarithmicScale?new BigNumber(a._drawValue):a._drawValue,i=a._numericProcessor.incrementDecrement(t,e,a._validInterval);return a.logarithmicScale&&(a._drawValue=i,i=Math.pow(10,Math.round(i))),i}},{key:"_keydownHandler",value:function(e){var a=this;if(!a.disabled&&!a.readonly){var t=e.charCode?e.charCode:e.which,i=[35,36,37,38,39,40],r=[35,38,39].indexOf(t)>-1,n=[36,37,40].indexOf(t)>-1,o=void 0;if("floatingPoint"===a.scaleType){if(parseFloat(a.value)<=parseFloat(a.min)&&n||parseFloat(a.value)>=parseFloat(a.max)&&r)return}else{var l=new BigNumber(a._drawValue);if(1!==l.compare(a._drawMin)&&n||-1!==l.compare(a._drawMax)&&r)return}if(i.indexOf(t)>-1){switch(e.preventDefault(),t){case 40:case 37:o=a._keyIncrementDecrement("subtract");break;case 38:case 39:o=a._keyIncrementDecrement("add");break;case 36:a._drawValue=a._drawMin,o=a.min;break;case 35:a._drawValue=a._drawMax,o=a.max}return a._validate(!1,o),!1}}}},{key:"_setDrawVariables",value:function(){var e=this;e.logarithmicScale?(e._drawValue=Math.log10(e.value),e._drawMin=Math.log10(e.min),e._drawMax=Math.log10(e.max)):(e._drawValue=e.value,e._drawMin=e.min,e._drawMax=e.max)}},{key:"_validateOnLogarithmicScale",value:function(e,a){function t(e){return Math.pow(10,Math.round(Math.log10(e)-Math.log10(5.5)+.5))}var i=this;if(e)if(i.min<=0)i.min=1,i._drawMin=0;else if(Math.log10(i.min)%1!==0){var r=t(parseFloat(i.min));r>i.min&&(r/=10),i._drawMin=Math.log10(i.min)}else i._drawMin=Math.log10(i.min);if(a)if(i.max<=0)i.max=1,i._drawMax=0;else if(Math.log10(i.max)%1!==0){var n=t(parseFloat(i.max));n<i.max&&(n*=10),i._drawMax=Math.log10(i.max)}else i._drawMax=Math.log10(i.max);"integer"===i.scaleType&&(i._drawMin<0&&(i._drawMin=0,i.min=1),i._drawMax<0&&(i._drawMax=1,i.max=10)),i._drawMax===i._drawMin&&(i._drawMax=i._drawMin+1)}},{key:"_getLayoutType",value:function(){var e=this,a=e.orientation,t=e.inverted;e._normalLayout="horizontal"===a&&!t||"vertical"===a&&t}},{key:"_trackOnMouseEnterHandler",value:function(){var e=this;e.readonly||e.disabled||e.$track.addClass("track-hovered")}},{key:"_trackOnMouseLeaveHandler",value:function(){var e=this;e.readonly||e.disabled||e.$track.removeClass("track-hovered")}}],[{key:"properties",get:function(){return{coerce:{value:!1,type:"boolean"},decimalSeparator:{value:".",type:"string"},interval:{value:"1",type:"any"},inverted:{value:!1,type:"boolean"},labelsVisibility:{value:"all",allowedValues:["all","endPoints","none"],type:"string"},logarithmicScale:{value:!1,type:"boolean"},max:{value:"100",type:"any"},mechanicalAction:{value:"switchWhileDragging",allowedValues:["switchUntilReleased","switchWhenReleased","switchWhileDragging"],type:"string"},messages:{value:{en:{missingReference:"{{elementType}}: Missing reference to {{files}}.",significantPrecisionDigits:"{{elementType}}: the properties significantDigits and precisionDigits cannot be set at the same time.",invalidMinOrMax:"{{elementType}}: Invalid {{property}} value. Max cannot be lower than Min.",noInteger:'{{elementType}}: precisionDigits could be set only on "floatingPoint" scaleType.'}},type:"object",extend:!0},min:{value:"0",type:"any"},orientation:{value:"vertical",allowedValues:["horizontal","vertical"],type:"string"},precisionDigits:{value:null,type:"number?"},readonly:{value:!1,type:"boolean"},scalePosition:{value:"near",allowedValues:["near","far","both","none"],type:"string"},scaleType:{value:"floatingPoint",allowedValues:["floatingPoint","integer"],type:"string"},scientificNotation:{value:!1,type:"boolean"},showTooltip:{value:!1,type:"boolean"},showUnit:{value:!1,type:"boolean"},significantDigits:{value:null,type:"number?"},ticksPosition:{value:"scale",allowedValues:["scale","track"],type:"string"},ticksVisibility:{value:"minor",allowedValues:["major","minor","none"],type:"string"},tooltipPosition:{value:"near",allowedValues:["near","far"],type:"string"},unit:{value:"kg",type:"string"},value:{value:"0",type:"any"},wordLength:{value:"int32",allowedValues:["int8","uint8","int16","uint16","int32","uint32","int64","uint64"],type:"string"}}}},{key:"listeners",get:function(){return{"track.down":"_trackDownHandler","document.move":"_documentMoveHandler","document.up":"_documentUpHandler",keydown:"_keydownHandler",resize:"_resizeHandler","document.selectstart":"_selectStartHandler","track.mouseenter":"_trackOnMouseEnterHandler","track.mouseleave":"_trackOnMouseLeaveHandler"}}}]),a}(JQX.BaseElement));