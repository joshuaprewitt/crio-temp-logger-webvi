"use strict";JQX.Utilities.Assign("NumericProcessor",function e(a,t){switch(babelHelpers.classCallCheck(this,e),a[t]){case"integer":return new JQX.Utilities.IntegerNumericProcessor(a,t);case"floatingPoint":return new JQX.Utilities.DecimalNumericProcessor(a,t);case"complex":return new JQX.Utilities.ComplexNumericProcessor(a,t)}}),JQX.Utilities.Assign("BaseNumericProcessor",function(){function e(a,t){babelHelpers.classCallCheck(this,e);var r=this;r.context=a,r._longestLabelSize=0,r.numericFormatProperty=t,r.regexScientificNotation=new RegExp(/^([-+]?([0-9]*\.[0-9]+|[0-9]+))(Y|Z|E|P|T|G|M|k|c|m|u|n|p|f|a|z|y){1}$/),r.prefixesToPowers={Y:24,Z:21,E:18,P:15,T:12,G:9,M:6,k:3,c:-2,m:-3,u:-6,n:-9,p:-12,f:-15,a:-18,z:-21,y:-24}}return babelHelpers.createClass(e,[{key:"prepareForValidation",value:function(e,a,t){var r=this.context,i=e||void 0!==a;t=t.replace(/\s/g,""),t=r._discardDecimalSeparator(t),("integer"===r[this.numericFormatProperty]&&(10===r._radixNumber||i)||"floatingPoint"===r[this.numericFormatProperty])&&this.regexScientificNotation.test(t)&&(t=this.scientificToDecimal(t));var n=!1,l=void 0;if("complex"===r[this.numericFormatProperty]&&r._regexSpecial.nonNumericValue.test(t)===!1)try{if(r._regexSpecial.exaValue.test(t)){var o=t.indexOf("E"),s=parseFloat(t.slice(0,o))*Math.pow(10,18),c=parseFloat(t.slice(o+1,-1));l=new NIComplex(s,c)}else l=new NIComplex(t);n=!0}catch(u){n=!1}return n===!1&&(!i&&r._regex[r._radixNumber].test(t)===!1||i&&r._regex[10].test(t)===!1)?void r._handleNonNumericValue(e,a,t):{value:t,enteredComplexNumber:l}}},{key:"isENotation",value:function(e){var a=new RegExp(/e/i);return a.test(e.toString())}},{key:"scientificToDecimal",value:function(e){var a=e.replace(/[a-z]/gi,""),t=e.replace(/[-+]?([0-9]*\.[0-9]+|[0-9]+)/g,""),r=parseFloat(a)*Math.pow(10,this.prefixesToPowers[t]);return r}},{key:"_createMeasureLabel",value:function(){var e=this.context,a=document.createElement("div");return a.className="jqx-label",a.style.position="absolute",a.style.visibility="hidden","far"!==e.scalePosition?e._measureLabelScale=e.$.scaleNear:e._measureLabelScale=e.$.scaleFar,e._measureLabelScale.appendChild(a),a}},{key:"_addMajorTickAndLabel",value:function(e,a,t,r,i){var n=this.context,l=n._settings.leftOrTop,o=n._numericProcessor.valueToPx(r),s="",c="";if(parseInt(o)>parseInt(n._measurements.trackLength))return{tick:s,label:c};if(n.logarithmicScale&&(e=n._formatLabel(Math.pow(10,r))),"jqx-tank"===n.nodeName.toLowerCase()||n._intervalHasChanged){var u=n._tickIntervalHandler.labelsSize;if(i){n._labelDummy.innerHTML=e;var d=n._numericProcessor.valueToPx(r),m=n._numericProcessor.valueToPx(parseFloat(n._drawMax)),v=n._numericProcessor.valueToPx(parseFloat(n._drawMin)),g=n._labelDummy[n._settings.size],_="vertical"===n.orientation?n._labelDummy.offsetWidth:n._labelDummy.offsetHeight,b=(g+u.minLabelSize)/2,p=(g+u.maxLabelSize)/2;t=n._normalLayout?m>d+p&&d-b>v:d-p>m&&v>d+b,_>this._longestLabelSize&&(this._longestLabelSize=_)}else this._longestLabelSize=Math.max(u.minLabelOtherSize,u.maxLabelOtherSize,this._longestLabelSize)}if(n._tickValues.push(r),s='<div style="'+l+": "+o+'px;" class="jqx-tick"></div>',t!==!1){void 0===a&&(n._labelDummy.innerHTML=e,a=n._labelDummy[n._settings.size]);var h=o-a/2;c+='<div class="jqx-label'+(i?" jqx-label-middle":"")+'" style="'+l+": "+h+'px;">'+e+"</div>"}return{tick:s,label:c}}},{key:"getWordLength",value:function(e){switch(e){case"int8":case"uint8":return 8;case"int16":case"uint16":return 16;case"int32":case"uint32":return 32;case"int64":case"uint64":return 64}}},{key:"getAngleByValue",value:function(e,a,t){var r=this.context,i=r.endAngle-r.startAngle,n=i/r._range;a!==!1&&r.logarithmicScale&&(e=Math.log10(e));var l=(e-r._drawMin)*n,o=void 0;return o=r.inverted?r.startAngle+l:r.endAngle-l,t?o:o*Math.PI/180+Math.PI/2}},{key:"getValueByAngle",value:function(e,a){var t=this.context,r=t.endAngle-t.startAngle,i=t._range,n=void 0;return n=t.inverted?(Math.abs(t.startAngle)+e)/r*i+parseFloat(t._drawMin):(t.endAngle-e)/r*i+parseFloat(t._drawMin),t.logarithmicScale&&(n=Math.pow(10,n)),a&&!t.coerce?Math.round(n):this.getCoercedValue(n,!1)}},{key:"updateGaugeValue",value:function(e){var a=this.context,t=a.value;a.value=e,a._drawValue=a.logarithmicScale?Math.log10(e).toString():e,a._number=this.createDescriptor(a.value),a.$.digitalDisplay.value=e,a.$.fireEvent("change",{value:e,oldValue:t}),delete a._valueBeforeCoercion}},{key:"validateColorRange",value:function(e){var a=this.context;return Math.min(Math.max(e,a.min),a.max)}},{key:"getActualValue",value:function(e){return this.context.logarithmicScale?Math.pow(10,e):e}},{key:"drawGaugeLogarithmicScaleMinorTicks",value:function(e,a,t){var r=this.context,i=void 0;a instanceof BigNumber&&(a=parseFloat(a.toString()));for(var n in e)if(i=n,n>=0&&n%1===0)break;for(var l=parseFloat(i);l<r._drawMax;l+=a)for(var o=2;9>=o;o++){var s=o*Math.pow(10,l+a-1);s<r.max&&t(s)}for(var c=parseFloat(i);c>r._drawMin;c-=a)for(var u=2;9>=u;u++){var d=u*Math.pow(10,c-1);d>r.min&&t(d)}}}]),e}()),JQX.Utilities.Assign("IntegerNumericProcessor",function(e){function a(e,t){babelHelpers.classCallCheck(this,a);var r=babelHelpers.possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e,t)),i=r;return i.context=e,i.defaultMins={int8:"-128",uint8:"0",int16:"-32768",uint16:"0",int32:"-2147483648",uint32:"0",int64:"-9223372036854775808",uint64:"0"},i.defaultMaxs={int8:"127",uint8:"255",int16:"32767",uint16:"65535",int32:"2147483647",uint32:"4294967295",int64:"9223372036854775807",uint64:"18446744073709551615"},r}return babelHelpers.inherits(a,e),babelHelpers.createClass(a,[{key:"createDescriptor",value:function(e,a,t,r,i){var n=void 0;if(e.constructor!==BigNumber){var l=!i&&this.context._radixNumber?this.context._radixNumber:10;10===l&&a&&e.constructor!==BigNumber&&this.isENotation(e)&&(e=new JQX.Utilities.NumberRenderer(e).largeExponentialToDecimal()),n=this.context._toBigNumberDecimal?this.context._toBigNumberDecimal(e.toString(l,this.context._wordLengthNumber),l):new BigNumber(e)}else n=new BigNumber(e);return t&&(this.context._unsigned&&-1===n.compare(0)&&(n=n.set(0)),r&&(n=this.context._validateRange(n)),n=this.round(n)),n}},{key:"round",value:function(e){if(this.context._wordLengthNumber<64)return new BigNumber(Math.round(e.toString()));var a=e.mod(1);return(1!==a._d.length||0!==a._d[0])&&(e=e.intPart(),e._s?a._d[1]>5&&(e=e.add(-1)):a._d[1]>4&&(e=e.add(1))),e}},{key:"validate",value:function(e,a,t){var r=void 0;return r=-1===e.compare(a)?a:1===e.compare(t)?t:e}},{key:"validateMinMax",value:function(e,a){var t=this.context,r=this.defaultMins[t.wordLength],i=new BigNumber(r),n=this.defaultMaxs[t.wordLength],l=new BigNumber(n);if(void 0===t._numberRenderer&&(t._numberRenderer=new JQX.Utilities.NumberRenderer),e){null!==t.min&&(t.min=t.min.toString().replace(/\s/g,""),t._numericProcessor.regexScientificNotation.test(t.min)&&(t.min=t._numericProcessor.scientificToDecimal(t.min)));var o=this.round(new BigNumber(t.min));null===t.min||t._minIsNull&&t._initialized||!(o.compare(i)>=0)?(t._minIsNull=!0,t.min=r,t._minObject=i):t._minObject=o}if(a){null!==t.max&&(t.max=t.max.toString().replace(/\s/g,""),t._numericProcessor.regexScientificNotation.test(t.max)&&(t.max=t._numericProcessor.scientificToDecimal(t.max)));var s=this.round(new BigNumber(t.max));null===t.max||t._maxIsNull&&t._initialized||!(s.compare(l)<=0)?(t._maxIsNull=!0,t.max=n,t._maxObject=l):t._maxObject=s}this.compare(t._minObject,t._maxObject)||(t._minObject=i,t._maxObject=l,t._drawMin=t.logarithmicScale?0:r,t._drawMax=t.logarithmicScale?10:n,t.min=r,t.max=n)}},{key:"valueToPx",value:function(e){var a=this.context,t=new BigNumber(a._measurements.trackLength).divide(new BigNumber(a._range)),r=void 0;if(a._normalLayout){var i=a._drawMin instanceof BigNumber?a._drawMin:new BigNumber(a._drawMin);e=new BigNumber(e),r=parseFloat(t.multiply(e.subtract(i)).toString())}else{var n=a._drawMax instanceof BigNumber?a._drawMax:new BigNumber(a._drawMax);r=parseFloat(this.round(n.subtract(e).multiply(t)).toString())}return r}},{key:"pxToValue",value:function(e){var a=this.context,t=void 0;if(t=a._normalLayout?a._valuePerPx.multiply(e-a._trackStart):a._valuePerPx.multiply(a._trackEnd-e),a.logarithmicScale){var r=parseFloat(t)+parseFloat(a._drawMin);return a._drawValue=r,new BigNumber(Math.round(Math.pow(10,r)))}var i=a._numericProcessor.round(new BigNumber(a.min).add(t));return a._drawValue=i,i}},{key:"compare",value:function(e,a){return e.constructor!==BigNumber&&(e=new BigNumber(e)),0!==e.compare(a)}},{key:"incrementDecrement",value:function(e,a,t){var r=this.context,i=void 0;if(e.constructor!==BigNumber&&(e=new BigNumber(e)),"add"===a){if(i=e.add(t),void 0!==r._drawMax)return i.compare(r._drawMax)>0?new BigNumber(r._drawMax):i}else if(i=e.subtract(t),void 0!==r._drawMin)return i.compare(r._drawMin)<0?new BigNumber(r._drawMin):i;return i}},{key:"render",value:function(e,a){var t=this.context;if(!t.scientificNotation&&a===!0)return new JQX.Utilities.NumberRenderer(new BigNumber(e)).bigNumberToExponent(t.significantDigits);var r=e;return"string"!=typeof e&&(r=e.toString(t._radixNumber,t._wordLengthNumber)),t.scientificNotation&&a===!0&&(r=new JQX.Utilities.NumberRenderer(r).toScientific()),r}},{key:"addTicksAndLabels",value:function(){var e=this.context,a=e._measurements.trackLength,t=e._normalLayout,r=e._majorTicksInterval,i=e._numericProcessor.round(new BigNumber(e._range).divide(r)),n=a/i,l=new BigNumber(e._drawMin),o=new BigNumber(e._drawMax),s=void 0,c=void 0,u=void 0,d=void 0,m=void 0,v=void 0,g=void 0,_=void 0,b=void 0,p="",h="";e._tickValues=[],this._longestLabelSize=0,t?(s=l,c=r.add(s.subtract(s.mod(r))),u=c.subtract(s),m=e._formatLabel(l),v=e._tickIntervalHandler.labelsSize.minLabelSize,d=o,g=e._formatLabel(o),_=e._tickIntervalHandler.labelsSize.maxLabelSize):(s=o,c=s.subtract(s.mod(r)),u=s.subtract(c),m=e._formatLabel(o),v=e._tickIntervalHandler.labelsSize.maxLabelSize,d=l,g=e._formatLabel(l),_=e._tickIntervalHandler.labelsSize.minLabelSize),e._labelDummy=this._createMeasureLabel(),b=this._addMajorTickAndLabel(m,v,!0,s),p+=b.tick,h+=b.label;var f=u.divide(r).multiply(n);if(0!==c.compare(e.max)&&f.compare(a)<0){var x=e._formatLabel(c.toString()),w=f.compare(v)>0;b=this._addMajorTickAndLabel(x,void 0,w,c,!0),p+=b.tick,h+=b.label}b=this.addMiddleMajorTicks(i,n,f,u,t,r),p+=b.tick,h+=b.label,b=this._addMajorTickAndLabel(g,_,!0,d),p+=b.tick,h+=b.label,p+=this.addMinorTicks(t),e._measureLabelScale.removeChild(e._labelDummy),delete e._labelDummy,delete e._measureLabelScale,"jqx-tank"===e.nodeName.toLowerCase()&&e._updateScaleWidth(this._longestLabelSize),e._appendTicksAndLabelsToScales(p,h)}},{key:"addMiddleMajorTicks",value:function(e,a,t,r,i,n){for(var l=this.context,o="",s="",c=void 0,u=1;e>u;u++){var d=t.add(u*a),m=void 0;if(i?m=n.multiply(u).add(r.add(new BigNumber(l._drawMin))):(m=new BigNumber(l._drawMax).subtract(r).subtract(n.multiply(u)),u===e-1&&0===m.compare(0)&&(l._numberRenderer.numericValue=l._tickIntervalHandler.nearestPowerOfTen,c=l._numberRenderer.bigNumberToExponent(1))),0!==m.compare(l._drawMax)){var v=l._formatLabel(m.toString()),g=!0;l._labelDummy.innerHTML=c?c:v;var _=l._labelDummy[l._settings.size];d.add(_).compare(e*a)>=0&&(g=!1);var b=this._addMajorTickAndLabel(v,void 0,g,m,!0);o+=b.tick,s+=b.label}}return{tick:o,label:s}}},{key:"addMinorTicks",value:function(e){function a(e){-1===i.indexOf(e)&&e%l===0&&(d+='<div style="'+o+": "+r._numericProcessor.valueToPx(e)+'px;" class="jqx-tick jqx-tick-minor"></div>')}function t(){var e=r._measurements.trackLength,a=e/i.length,t=.1;20>a?t=1:a>=20&&40>a?t=c-s>1?1:.5:a>=40&&80>a&&(t=.2);for(var n=Math.floor(r._drawMax),l=r._drawMax-n,u=r._drawMax-r._drawMin>i.length,m=r._drawMax;m>0;m-=1)for(var v=l>0?Math.pow(10,m-l+1):Math.pow(10,m),g=v*t,_=v;_>0;_-=g)if(_<r.max&&_>r.min){var b=new BigNumber(Math.log10(_));(b%1===0&&u||!u)&&(d+='<div style="'+o+": "+r._numericProcessor.valueToPx(b)+'px;" class="jqx-tick jqx-tick-minor"></div>')}}var r=this.context,i=r._tickValues,n=r._tickIntervalHandler.nearestPowerOfTen,l=r._minorTicksInterval,o=r._settings.leftOrTop,s=void 0,c=void 0,u=void 0,d="";if(e?(s=i[0],c=i[1],u=i[i.length-1]):(s=i[i.length-1],c=i[i.length-2],u=i[0]),r.logarithmicScale)t();else{for(var m=c;s.compare(m)<0;m=m.subtract(n))a(m);for(var v=c.add(n);u.compare(v)>0;v=v.add(n))a(v)}return d}},{key:"addGaugeTicksAndLabels",value:function(){var e=this.context;if("none"!==e.ticksVisibility||"none"!==e.labelsVisibility){var a=this,t=Math.max(e._tickIntervalHandler.labelsSize.minLabelSize,e._tickIntervalHandler.labelsSize.maxLabelSize),r=e._majorTicksInterval,i=e._minorTicksInterval,n={},l=e._distance,o=e._measurements.radius,s=o-l.majorTickDistance,c=o-l.minorTickDistance,u=new BigNumber(e._drawMin),d=new BigNumber(e._drawMax),m=void 0,v=void 0,g=void 0,_=void 0,b=void 0,p=void 0;"none"!==e.ticksVisibility?(m=function(a){e._drawTick(a,s,"major")},v=function(t){e._drawTick(a.getAngleByValue(t,!0),c,"minor")}):(m=function(){},v=function(){}),g="none"!==e.labelsVisibility?function(a,t,r){e._drawLabel(a,t,l.labelDistance,r)}:function(){},e.inverted?(b=e.startAngle,p=e.endAngle):(b=e.endAngle,p=e.startAngle),_=a.getAngleByValue(u,!1),m(_),n[e._drawMin.toString()]=!0,g(_,e.min,!1);var h=u.subtract(u.mod(r)),f=void 0;-1!==u.compare(0)&&(h=h.add(r));for(var x=new BigNumber(h);-1!==x.compare(u);x=x.subtract(i))f=x;_=a.getAngleByValue(h,!1),m(_),n[h.toString()]=!0,2*Math.PI*e._measurements.innerRadius*(e._getAngleDifference(b,a.getAngleByValue(h,!1,!0))/360)>t&&g(_,this.getActualValue(h),-1===h.compare(d));var w=void 0;for(w=h.add(r);-1===w.compare(d.subtract(r));w=w.add(r))_=a.getAngleByValue(w,!1),m(_),n[w.toString()]=!0,g(_,this.getActualValue(w),!1);if(void 0===n[w.toString()]&&1!==w.compare(d)&&(_=a.getAngleByValue(w,!1),m(_),n[w.toString()]=!0,2*Math.PI*e._measurements.innerRadius*(e._getAngleDifference(p,a.getAngleByValue(w,!0))/360)>=t&&g(_,this.getActualValue(w),!0),_=a.getAngleByValue(d,!1),m(_),2*Math.PI*e._measurements.innerRadius*(e._getAngleDifference(p,b)/360)>=t&&g(_,e.max,!1)),e.logarithmicScale)this.drawGaugeLogarithmicScaleMinorTicks(n,r,v);else for(var M=f;-1===M.compare(d);M=M.add(i))n[M.toString()]||v(M)}}},{key:"updateToolTipAndValue",value:function(e,a,t){var r=this.context;r._updateTooltipValue(e.toString()),r.logarithmicScale&&(e=parseFloat(Math.pow(10,parseFloat(e)).toFixed(13))),e=e instanceof BigNumber?e:new BigNumber(e),0!==e.compare(a)&&t&&(r._drawValue=e.toString(),r.value=r._drawValue,r.$.fireEvent("change",{value:r.value,oldValue:a}))}},{key:"validateInterval",value:function(e){var a=this.context;a._validInterval=new BigNumber(e),a._validInterval=this.round(a._validInterval),a.interval=a._validInterval.toString()}},{key:"getCoercedValue",value:function(e,a){var t=this.context;if(!t.coerce)return e;e=e instanceof BigNumber?e:new BigNumber(e);var r=void 0,i=void 0;a!==!1?(r=new BigNumber(t._drawMin),i=new BigNumber(t._drawMax)):(r=new BigNumber(t.min),i=new BigNumber(t.max));var n=e.subtract(r),l=n.mod(t._validInterval);if(0===l.compare(0))return e;var o=n.subtract(l),s=o.add(t._validInterval);if(n.subtract(o).abs().compare(n.subtract(s).abs())<0)return o.add(r);var c=s.add(r);return c.compare(i)<=0?c:o.add(r)}},{key:"updateValue",value:function(e){var a=this.context,t=e instanceof BigNumber==!1?new BigNumber(e):e,r=a.value;(this.compare(t,a._number)||a._scaleTypeChangedFlag)&&(a.value=t.toString(),a._number=this.createDescriptor(t),a.$.fireEvent("change",{value:t.toString(),oldValue:r})),a._drawValue=a.logarithmicScale?Math.log10(t):t,a._moveThumbBasedOnValue(a._drawValue)}},{key:"getValuePerPx",value:function(e,a){return new BigNumber(e).divide(a)}},{key:"restrictValue",value:function(e){e[1].constructor===BigNumber?-1===e[1].compare(e[0])&&e[1].set(e[0]):e[1]<e[0]&&(e[1]=e[0])}},{key:"getAngleByValue",value:function(e,t,r){var i=this.context;if(i._wordLengthNumber<64)return babelHelpers.get(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"getAngleByValue",this).call(this,parseFloat(e.toString()),t,r);e instanceof BigNumber==!1&&(e=new BigNumber(e)),t!==!1&&i.logarithmicScale&&(e=new BigNumber(Math.log10(e.toString())));var n=i.endAngle-i.startAngle,l=new BigNumber(n).divide(i._range),o=e.subtract(i._drawMin).multiply(l),s=void 0;return s=i.inverted?o.add(i.startAngle):o.multiply(-1).add(i.endAngle),r?s:s*Math.PI/180+Math.PI/2}},{key:"getValueByAngle",value:function(e){var t=this.context;if(t._wordLengthNumber<64)return babelHelpers.get(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"getValueByAngle",this).call(this,e,!0);var r=t.endAngle-t.startAngle,i=t._range,n=void 0;return n=t.inverted?new BigNumber((Math.abs(t.startAngle)+e)/r).multiply(i).add(t._drawMin):new BigNumber((t.endAngle-e)/r).multiply(i).add(t._drawMin),t.logarithmicScale&&(n=new BigNumber(Math.pow(10,n.toString()))),t.coerce?this.getCoercedValue(n,!1):this.round(n)}},{key:"updateGaugeValue",value:function(e){e instanceof BigNumber==!1&&babelHelpers.get(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"updateGaugeValue",this).call(this,e);var t=this.context,r=t.value;t.value=e.toString(),t._drawValue=t.logarithmicScale?Math.log10(t.value).toString():t.value,t._number=e,t.$.digitalDisplay.value=t.value,t.$.fireEvent("change",{value:t.value,oldValue:r})}},{key:"validateColorRange",value:function(e){var t=this.context;if(t._wordLengthNumber<64)return babelHelpers.get(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"validateColorRange",this).call(this,e);e=new BigNumber(e);var r=new BigNumber(t.min),i=new BigNumber(t.max);return-1===e.compare(r)&&(e=r),1===e.compare(i)&&(e=i),e}}]),a}(JQX.Utilities.BaseNumericProcessor)),JQX.Utilities.Assign("DecimalNumericProcessor",function(e){function a(e,t){babelHelpers.classCallCheck(this,a);var r=babelHelpers.possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e,t));return r.context=e,r}return babelHelpers.inherits(a,e),babelHelpers.createClass(a,[{key:"getPreciseModulo",value:function(e,a,t){var r=e>=0?1:-1;if(e=Math.abs(e),a=Math.abs(a),"undefined"==typeof t){var i=e.toExponential(),n=a.toExponential(),l=parseInt(i.slice(i.indexOf("e")+1),10),o=parseInt(n.slice(n.indexOf("e")+1),10),s=0>l?Math.abs(l):0,c=0>o?Math.abs(o):0,u=Math.max(s,c);if(this.roundCoefficient=u,a>e)return r*e;if(e===a)return 0;if((-1>e||e>1)&&(-1>a||a>1||1===a))return e%1===0&&a%1===0?r*(e%a):r*parseFloat(new BigNumber(e).mod(a).toString());var d=Math.pow(10,u);return r*(e*d%(a*d)/d)}return r*(Math.round(e*t)%Math.round(a*t))}},{key:"createDescriptor",value:function(e,a,t,r){var i=parseFloat(e);return r&&(i=this.context._validateRange(i)),i}},{key:"validate",value:function(e,a,t){var r=void 0;return r=a>e?a:e>t?t:e}},{key:"validateMinMax",value:function(e,a){var t=this.context,r="undefined"!=typeof t._regexSpecial?t._regexSpecial.inf.test(t.min):!1,i="undefined"!=typeof t._regexSpecial?t._regexSpecial.inf.test(t.max):!1;e&&((null===t.min||r)&&(t.min=-(1/0)),t.min=t.min.toString().replace(/\s/g,""),t._numericProcessor.regexScientificNotation.test(t.min)&&(t.min=t._numericProcessor.scientificToDecimal(t.min)),t._minObject=t._discardDecimalSeparator(t.min)),a&&((null===t.max||i)&&(t.max=1/0),t.max=t.max.toString().replace(/\s/g,""),t._numericProcessor.regexScientificNotation.test(t.max)&&(t.max=t._numericProcessor.scientificToDecimal(t.max)),t._maxObject=t._discardDecimalSeparator(t.max)),this.compare(t._minObject,t._maxObject)||(t._maxObject=parseFloat(t._maxObject)+1,t.max=t._maxObject)}},{key:"valueToPx",value:function(e){var a=this.context,t=a._measurements.trackLength/a._range,r=void 0;return r=a._normalLayout?t*(e-a._drawMin):t*(a._drawMax-e),Math.round(r)}},{key:"pxToValue",value:function(e){var a=this.context,t=void 0;if(t=a._normalLayout?(e-a._trackStart)*a._valuePerPx:(a._trackEnd-e)*a._valuePerPx,a.logarithmicScale){var r=t+parseFloat(a._drawMin);return a._drawValue=r,Math.pow(10,r)}return a._drawValue=t+parseFloat(a.min),t+parseFloat(a.min)}},{key:"compare",value:function(e,a){return e!==a}},{key:"incrementDecrement",value:function(e,a,t){var r=this.context,i=void 0;if("add"===a){if(i=parseFloat(e)+parseFloat(t),void 0!==r._drawMax)return i>parseFloat(r._drawMax)?r._drawMax:i}else if(i=parseFloat(e)-parseFloat(t),void 0!==r._drawMin)return i<parseFloat(r._drawMin)?r._drawMin:i;return i}},{key:"render",value:function(e){var a=this.context,t="undefined"!=typeof a._regexSpecial?a._regexSpecial.nonNumericValue.test(e):!1;if(t)return e;var r=new JQX.Utilities.NumberRenderer(e);return a.scientificNotation?r.toScientific():r.toDigits(a.significantDigits,a.precisionDigits)}},{key:"addTicksAndLabels",value:function(){var e=this.context,a=e._measurements.trackLength,t=e._normalLayout,r=e._majorTicksInterval,i=Math.round(e._range/parseFloat(r.toString())),n=a/i,l=parseFloat(e._drawMin),o=parseFloat(e._drawMax),s=void 0,c=void 0,u=void 0,d=void 0,m=void 0,v=void 0,g=void 0,_=void 0,b=void 0,p="",h="";e._tickValues=[],this._longestLabelSize=0,t?(s=l,c=e.logarithmicScale&&0>l&&-1!==l?parseFloat(s-this.getPreciseModulo(s,r)):parseFloat(s-this.getPreciseModulo(s,r)+parseFloat(r)),u=c-s,m=e._formatLabel(l),v=e._tickIntervalHandler.labelsSize.minLabelSize,d=o,g=e._formatLabel(o),_=e._tickIntervalHandler.labelsSize.maxLabelSize):(s=o,c=parseFloat(s-this.getPreciseModulo(s,r)),u=s-c,m=e._formatLabel(o),v=e._tickIntervalHandler.labelsSize.maxLabelSize,d=l,g=e._formatLabel(l),_=e._tickIntervalHandler.labelsSize.minLabelSize),e._labelDummy=this._createMeasureLabel(),b=this._addMajorTickAndLabel(m,v,!0,s),p+=b.tick,h+=b.label;var f=u/r*n;if(c.toString()!==e._drawMax.toString()&&a>f){var x=e._formatLabel(c.toString()),w=f>v;b=this._addMajorTickAndLabel(x,void 0,w,c,!0),p+=b.tick,h+=b.label}b=this.addMiddleMajorTicks(i,n,f,u,t,r),p+=b.tick,h+=b.label,b=this._addMajorTickAndLabel(g,_,!0,d),p+=b.tick,h+=b.label,p+=this.addMinorTicks(t),e._measureLabelScale.removeChild(e._labelDummy),delete e._labelDummy,delete e._measureLabelScale,"jqx-tank"===e.nodeName.toLowerCase()&&e._updateScaleWidth(this._longestLabelSize),e._appendTicksAndLabelsToScales(p,h)}},{key:"addMiddleMajorTicks",value:function(e,a,t,r,i,n){for(var l=this.context,o="",s="",c=1;e>c;c++){var u=c*a+t,d=void 0;if(d=i?parseFloat(l._drawMin)+n*c+r:parseFloat(l._drawMax)-n*c-r,d.toString()!==l._drawMax.toString()){var m=l._formatLabel(d.toString()),v=!0;l._labelDummy.innerHTML=m;var g=l._labelDummy[l._settings.size];u+g>=e*a&&(v=!1);var _=this._addMajorTickAndLabel(m,void 0,v,d,!0);o+=_.tick,s+=_.label}}return{tick:o,label:s}}},{key:"addMinorTicks",value:function(e){function a(e){return parseFloat(e.toFixed(s))}function t(e){-1===n.indexOf(e)&&0===i._numericProcessor.getPreciseModulo(e,o,c)&&(g+='<div style="'+u+": "+i._numericProcessor.valueToPx(e)+'px;" class="jqx-tick jqx-tick-minor"></div>')}function r(){var e=i._measurements.trackLength,a=e/n.length,t=.1;20>a?t=1:a>=20&&40>a?t=m-d>1?1:.5:a>=40&&80>a&&(t=.2);for(var r=Math.floor(i._drawMax),l=i._drawMax-r,o=i._drawMax-i._drawMin>n.length,s=i._drawMax;s>i._drawMin-1;s-=1)for(var c=l>0?Math.pow(10,s-l+1):Math.pow(10,s),v=c*t,_=c;_>0;_-=v)if(_<i.max&&_>i.min){var b=new BigNumber(Math.log10(_));(b%1===0&&o||!o)&&(g+='<div style="'+u+": "+i._numericProcessor.valueToPx(b)+'px;" class="jqx-tick jqx-tick-minor"></div>')}}var i=this.context,n=i._tickValues,l=i._tickIntervalHandler.nearestPowerOfTen,o=i._minorTicksInterval,s=Math.log10(l)<0?Math.round(Math.abs(Math.log10(l))):0,c=Math.pow(10,s),u=i._settings.leftOrTop,d=void 0,m=void 0,v=void 0,g="";if(e?(d=n[0],m=n[1],v=n[n.length-1]):(d=n[n.length-1],m=n[n.length-2],v=n[0]),i.logarithmicScale)r();else{for(var _=m;_>d;_=a(_-l))t(_);for(var b=a(m+l);v>b;b=a(b+l))t(b)}return g}},{key:"addGaugeTicksAndLabels",value:function(){var e=this.context;if("none"!==e.ticksVisibility||"none"!==e.labelsVisibility){var a=this,t=Math.max(e._tickIntervalHandler.labelsSize.minLabelSize,e._tickIntervalHandler.labelsSize.maxLabelSize),r=e._majorTicksInterval,i=e._minorTicksInterval,n={},l=e._distance,o=e._measurements.radius,s=o-l.majorTickDistance,c=o-l.minorTickDistance,u=void 0,d=void 0,m=void 0,v=void 0,g=void 0,_=void 0;"none"!==e.ticksVisibility&&e._plotTicks!==!1?(u=function(a){e._drawTick(a,s,"major")},d=function(t){e._drawTick(a.getAngleByValue(t,!0),c,"minor")}):(u=function(){},d=function(){}),m="none"!==e.labelsVisibility&&e._plotLabels!==!1?function(a,t,r){e._drawLabel(a,t,l.labelDistance,r)}:function(){},e.inverted?(g=e.startAngle,_=e.endAngle):(g=e.endAngle,_=e.startAngle),v=a.getAngleByValue(e._drawMin,!1),u(v),n[e._drawMin]=!0,m(v,e.min,!1);var b=e._drawMin-a.getPreciseModulo(e._drawMin,r),p=void 0;e._drawMin>=0&&(b+=r);for(var h=b;h>=e._drawMin;h-=i)p=h;v=a.getAngleByValue(b,!1),u(v),n[b]=!0,2*Math.PI*e._measurements.innerRadius*(e._getAngleDifference(g,a.getAngleByValue(b,!1,!0))/360)>t&&m(v,this.getActualValue(b),b<e._drawMax);var f=void 0;for(f=b+r;f<e._drawMax-r;f+=r)v=a.getAngleByValue(f,!1),u(v),n[f]=!0,m(v,this.getActualValue(f),!0);if(void 0===n[f]&&f<=e._drawMax&&(v=a.getAngleByValue(f,!1),u(v),n[f]=!0,2*Math.PI*e._measurements.innerRadius*(e._getAngleDifference(_,a.getAngleByValue(f,!1,!0))/360)>=t&&m(v,this.getActualValue(f),!0),v=a.getAngleByValue(e._drawMax,!1),u(v),n[e._drawMax]=!0,2*Math.PI*e._measurements.innerRadius*(e._getAngleDifference(_,g)/360)>=t&&m(v,e.max,!1)),e.logarithmicScale)this.drawGaugeLogarithmicScaleMinorTicks(n,r,d);else for(var x=p;x<e._drawMax;x+=i)n[x]||d(x)}}},{key:"updateToolTipAndValue",value:function(e,a,t){var r=this.context;r._updateTooltipValue(e),r.logarithmicScale&&(e=parseFloat(Math.pow(10,parseFloat(e)).toFixed(13))),e!==a&&t&&(r._drawValue=e.toString(),r.value=r._discardDecimalSeparator(r._drawValue),r.$.fireEvent("change",{value:r.value,oldValue:a}))}},{key:"validateInterval",value:function(e){var a=this.context;a._validInterval=parseFloat(e)}},{key:"getCoercedValue",value:function(e,a){var t=this.context;if(!t.coerce)return e;var r=void 0,i=void 0;a!==!1?(r=parseFloat(t._drawMin),i=parseFloat(t._drawMax)):(r=parseFloat(t.min),i=parseFloat(t.max));var n=e-r,l=t._numericProcessor.getPreciseModulo(n,parseFloat(t.interval)),o=this.roundCoefficient;if(0===l)return e;0===this.roundCoefficient&&(o=12);var s=parseFloat((n-l).toFixed(o)),c=s+parseFloat(t.interval);if(t.max-t.min<=parseFloat(t.interval)&&!t.logarithmicScale){var u=r,d=i;return e>=u+(d-u)/2?d:u}if(Math.abs(n-s)<Math.abs(n-c))return s+r;var m=c+r;return m>i?s+r:m}},{key:"updateValue",value:function(e){var a=this.context,t=e.toString(),r=a.value;(parseFloat(t)!==r||a._scaleTypeChangedFlag)&&(a.value=t,a._number=this.createDescriptor(t),a.$.fireEvent("change",{value:t,oldValue:r})),a._drawValue=a.logarithmicScale?Math.log10(t).toString():t,a._moveThumbBasedOnValue(a._drawValue)}},{key:"getValuePerPx",value:function(e,a){return parseFloat(e)/a}},{key:"restrictValue",value:function(e){e[1]<e[0]&&(e[1]=e[0])}}]),a}(JQX.Utilities.BaseNumericProcessor)),JQX.Utilities.Assign("ComplexNumericProcessor",function(e){function a(e,t){babelHelpers.classCallCheck(this,a);var r=babelHelpers.possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e,t));return r.context=e,r}return babelHelpers.inherits(a,e),babelHelpers.createClass(a,[{key:"createDescriptor",value:function(e,a,t,r,i,n){var l=void 0;if(n)l=n;else{var o=[];e.constructor===NIComplex?(o[0]=e.realPart,o[1]=e.imaginaryPart):o[0]=e,l=new(Function.prototype.bind.apply(NIComplex,[null].concat(o)))}return r&&(l=this.context._validateRange(l)),l}},{key:"validate",value:function(e,a,t){var r=e;return a!==-(1/0)?-1===this.compareComplexNumbers(e,a)&&(r=new NIComplex(a.realPart,a.imaginaryPart)):t!==1/0&&1===this.compareComplexNumbers(e,t)&&(r=new NIComplex(t.realPart,t.imaginaryPart)),r}},{key:"compare",value:function(e,a){return 0!==this.compareComplexNumbers(e,a)}},{key:"validateMinMax",value:function(e,a){var t=this.context;e&&(null===t.min||t._regexSpecial.inf.test(t.min)?(t.min=-(1/0),t._minObject=-(1/0)):t._minObject=new NIComplex(t.min)),a&&(null===t.max||t._regexSpecial.inf.test(t.max)?(t.max=1/0,t._maxObject=1/0):t._maxObject=new NIComplex(t.max))}},{key:"incrementDecrement",value:function(e,a){var t=new NIComplex(e.realPart,e.imaginaryPart),r=this.context._spinButtonsStepObject;return"add"===a?(t.realPart+=r.realPart,t.imaginaryPart+=r.imaginaryPart):(t.realPart-=r.realPart,t.imaginaryPart-=r.imaginaryPart),t}},{key:"render",value:function(e){var a=e;if(this.context._regexSpecial.nonNumericValue.test(e)===!1){var t=a.realPart,r=a.imaginaryPart,i=void 0,n=this.context.significantDigits,l=this.context.precisionDigits;r>=0?i="+":(i="-",r=Math.abs(r));var o=new JQX.Utilities.NumberRenderer(t),s=new JQX.Utilities.NumberRenderer(r);this.context.scientificNotation?(t=o.toScientific(),r=s.toScientific()):(t=o.toDigits(n,l),r=s.toDigits(n,l)),a=t+" "+i+" "+r+"i"}return a}},{key:"compareComplexNumbers",value:function(e,a){if(e.constructor!==NIComplex||a.constructor!==NIComplex)return-1;var t=e.realPart,r=a.realPart;if(r>t)return-1;if(t>r)return 1;var i=e.imaginaryPart,n=a.imaginaryPart;return n>i?-1:i>n?1:0}}]),a}(JQX.Utilities.BaseNumericProcessor));